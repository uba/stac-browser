{"version":3,"file":"js/5833.8137a15b.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./node_modules/stac-js/node_modules/@radiantearth/stac-migrate/migrate.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/utils.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/object.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/http.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/mediatypes.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/reference.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/link.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/hypermedia.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/apicollection.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/asset.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/stac.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/cataloglike.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/catalog.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/datetime.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/geo.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/collection.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/collectioncollection.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/item.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/itemcollection.js","webpack://@radiantearth/stac-browser/./node_modules/stac-js/src/index.js"],"sourcesContent":["// Migration rules partly based on PySTAC and @openeo/js-commons,\n// see https://github.com/stac-utils/pystac/tree/v0.5.4/pystac/serialization/migrate.py\n// and https://github.com/Open-EO/openeo-js-commons/tree/v1.2.0/src/migrate/collections.js\n\nvar compareVersions = require('compare-versions');\n\nconst LATEST_VERSION = '1.0.0';\nconst DONE = true; // This is used to verify in code coverage whether something has been used or not\nconst SCHEMAS = {\n\t'classification': 'https://stac-extensions.github.io/classification/v1.1.0/schema.json',\n\t'datacube': 'https://stac-extensions.github.io/datacube/v2.1.0/schema.json',\n\t'eo': 'https://stac-extensions.github.io/eo/v1.0.0/schema.json',\n\t'file': 'https://stac-extensions.github.io/file/v1.0.0/schema.json',\n\t'item-assets': 'https://stac-extensions.github.io/item-assets/v1.0.0/schema.json',\n\t'label': 'https://stac-extensions.github.io/label/v1.0.1/schema.json',\n\t'pointcloud': 'https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json',\n\t'processing': 'https://stac-extensions.github.io/processing/v1.1.0/schema.json',\n\t'projection': 'https://stac-extensions.github.io/projection/v1.0.0/schema.json',\n\t'raster': 'https://stac-extensions.github.io/raster/v1.1.0/schema.json',\n\t'sar': 'https://stac-extensions.github.io/sar/v1.0.0/schema.json',\n\t'sat': 'https://stac-extensions.github.io/sat/v1.0.0/schema.json',\n\t'scientific': 'https://stac-extensions.github.io/scientific/v1.0.0/schema.json',\n\t'table': 'https://stac-extensions.github.io/table/v1.2.0/schema.json',\n\t'timestamps': 'https://stac-extensions.github.io/timestamps/v1.0.0/schema.json',\n\t'version': 'https://stac-extensions.github.io/version/v1.0.0/schema.json',\n\t'view': 'https://stac-extensions.github.io/view/v1.0.0/schema.json'\n};\nconst EXTENSIONS = {\n\t// Add a : at the end to indicate it has a prefix, otherwise list all fields separately (see version extension for example).\n\titemAndCollection: {\n\t\t// with prefix\n\t\t'cube:': SCHEMAS.datacube,\n\t\t'eo:': SCHEMAS.eo,\n\t\t'file:': SCHEMAS.file,\n\t\t'label:': SCHEMAS.label,\n\t\t'pc:': SCHEMAS.pointcloud,\n\t\t'processing:': SCHEMAS.processing,\n\t\t'proj:': SCHEMAS.projection,\n\t\t'raster:': SCHEMAS.raster,\n\t\t'sar:': SCHEMAS.sar,\n\t\t'sat:': SCHEMAS.sat,\n\t\t'sci:': SCHEMAS.scientific,\n\t\t'view:': SCHEMAS.view,\n\t\t// without prefix\n\t\t'version': SCHEMAS.version,\n\t\t'deprecated': SCHEMAS.version,\n\t\t'published': SCHEMAS.timestamps,\n\t\t'expires': SCHEMAS.timestamps,\n\t\t'unpublished': SCHEMAS.timestamps\n\t},\n\tcatalog: {\n\t\t// None yet\n\t},\n\tcollection: {\n\t\t'item_assets': SCHEMAS['item-assets']\n\t},\n\titem: {\n\t\t// None yet\n\t},\n};\nEXTENSIONS.collection = Object.assign(EXTENSIONS.collection, EXTENSIONS.itemAndCollection);\nEXTENSIONS.item = Object.assign(EXTENSIONS.item, EXTENSIONS.itemAndCollection);\n\nvar Ext = {\n\tparseUrl(url) {\n\t\tlet match = url.match(/^https?:\\/\\/stac-extensions.github.io\\/([^\\/]+)\\/v([^\\/]+)\\/[^.]+.json$/i);\n\t\tif (match) {\n\t\t\treturn {\n\t\t\t\tid: match[1],\n\t\t\t\tversion: match[2]\n\t\t\t};\n\t\t}\n\t}\n};\n\nvar V = {\n\tversion: LATEST_VERSION,\n\textensions: {},\n\n\tset(stac) {\n\t\tif (typeof stac.stac_version !== 'string') {\n\t\t\tV.version = '0.6.0'; // Assume the worst case, it doesn't seem there's a clear indicator for 0.7.0\n\t\t}\n\t\telse {\n\t\t\tV.version = stac.stac_version;\n\t\t}\n\n\t\tif (Array.isArray(stac.stac_extensions)) {\n\t\t\tfor(let ext of stac.stac_extensions) {\n\t\t\t\tlet e = Ext.parseUrl(ext);\n\t\t\t\tif (e) {\n\t\t\t\t\tV.extensions[e.id] = e.version;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tbefore(version, ext = null) {\n\t\tlet compareTo = ext ? V.extensions[ext] : V.version;\n\t\tif (typeof compareTo === 'undefined') {\n\t\t\treturn false;\n\t\t}\n\t\telse {\n\t\t\treturn compareVersions.compare(compareTo, version, '<');\n\t\t}\n\t}\n};\n\nvar _ = {\n\n\ttype(val) {\n\t\tlet type = typeof val;\n\t\tif (type === 'object') {\n\t\t\tif (val === null) {\n\t\t\t\treturn 'null';\n\t\t\t}\n\t\t\telse if (Array.isArray(val)) {\n\t\t\t\treturn 'array';\n\t\t\t}\n\t\t}\n\t\treturn type;\n\t},\n\n\tis(val, type) {\n\t\treturn (_.type(val) === type);\n\t},\n\n\tisDefined(val) {\n\t\treturn (typeof val !== 'undefined');\n\t},\n\n\tisObject(obj) {\n\t\treturn (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\n\t},\n\n\trename(obj, oldKey, newKey) {\n\t\tif (typeof obj[oldKey] !== 'undefined' && typeof obj[newKey] === 'undefined') {\n\t\t\tobj[newKey] = obj[oldKey];\n\t\t\tdelete obj[oldKey];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tforAll(obj, key, fn) {\n\t\tif (obj[key] && typeof obj[key] === 'object') {\n\t\t\tfor(let i in obj[key]) {\n\t\t\t\tfn(obj[key][i]);\n\t\t\t}\n\t\t}\n\t},\n\n\ttoArray(obj, key) {\n\t\tif (typeof obj[key] !== 'undefined' && !Array.isArray(obj[key])) {\n\t\t\tobj[key] = [obj[key]];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tflattenArray(obj, key, newKeys, summary = false) {\n\t\tif (Array.isArray(obj[key])) {\n\t\t\tfor(let i in obj[key]) {\n\t\t\t\tif (typeof newKeys[i] === 'string') {\n\t\t\t\t\tlet value = obj[key][i];\n\t\t\t\t\tobj[newKeys[i]] = summary ? [value] : value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete obj[key];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tflattenOneElementArray(obj, key, summary = false) {\n\t\tif (!summary && Array.isArray(obj[key])) {\n\t\t\tif (obj[key].length === 1) {\n\t\t\t\tobj[key] = obj[key][0];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false; // It's still an array and we don't know which element to choose\n\t\t\t}\n\t\t}\n\t\treturn true; // It's already a single element\n\t},\n\n\tremoveFromArray(obj, key, valueToRemove) {\n\t\tif (Array.isArray(obj[key])) {\n\t\t\tlet index = obj[key].indexOf(valueToRemove);\n\t\t\tif (index > -1) {\n\t\t\t\tobj[key].splice(index, 1);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tensure(obj, key, defaultValue) {\n\t\tif (_.type(defaultValue) !== _.type(obj[key])) {\n\t\t\tobj[key] = defaultValue;\n\t\t}\n\t\treturn true;\n\t},\n\n\tupgradeExtension(context, extension) {\n\t\tlet {id, version} = Ext.parseUrl(extension);\n\t\tlet index = context.stac_extensions.findIndex(url => {\n\t\t\tlet old = Ext.parseUrl(url);\n\t\t\treturn (old && old.id === id && compareVersions.compare(old.version, version, '<'));\n\t\t});\n\t\tif (index !== -1) {\n\t\t\tcontext.stac_extensions[index] = extension;\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\taddExtension(context, newExtension) {\n\t\tlet {id, version} = Ext.parseUrl(newExtension);\n\t\tlet index = context.stac_extensions.findIndex(url => {\n\t\t\tif (url === newExtension) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tlet old = Ext.parseUrl(url);\n\t\t\tif (old && old.id === id && compareVersions.compare(old.version, version, '<')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (index === -1) {\n\t\t\tcontext.stac_extensions.push(newExtension);\n\t\t}\n\t\telse {\n\t\t\tcontext.stac_extensions[index] = newExtension;\n\t\t}\n\n\t\tcontext.stac_extensions.sort();\n\t\treturn true;\n\t},\n\n\tremoveExtension(context, oldExtension) {\n\t\treturn _.removeFromArray(context, 'stac_extensions', oldExtension);\n\t},\n\n\tmigrateExtensionShortnames(context) {\n\t\tlet oldShortnames = Object.keys(SCHEMAS);\n\t\tlet newSchemas = Object.values(SCHEMAS);\n\t\treturn _.mapValues(context, 'stac_extensions', oldShortnames, newSchemas);\n\t},\n\n\tpopulateExtensions(context, type) {\n\t\tlet objectsToCheck = [];\n\t\tif (type == 'catalog' || type == 'collection') {\n\t\t\tobjectsToCheck.push(context);\n\t\t}\n\t\tif ((type == 'item' || type == 'collection') && _.isObject(context.assets)) {\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.assets));\n\t\t}\n\t\tif (type == 'collection' && _.isObject(context.item_assets)) {\n\t\t\tobjectsToCheck = objectsToCheck.concat(Object.values(context.item_assets));\n\t\t}\n\t\tif (type == 'collection' && _.isObject(context.summaries)) {\n\t\t\tobjectsToCheck.push(context.summaries);\n\t\t}\n\t\tif (type == 'item' && _.isObject(context.properties)) {\n\t\t\tobjectsToCheck.push(context.properties);\n\t\t}\n\n\t\tfor (let obj of objectsToCheck) {\n\t\t\tObject.keys(obj).forEach(key => {\n\t\t\t\tlet prefix = key.match(/^(\\w+:|[^:]+$)/i);\n\t\t\t\tif (Array.isArray(prefix)) {\n\t\t\t\t\tlet ext = EXTENSIONS[type][prefix[0]];\n\t\t\t\t\t_.is(ext, 'string') && _.addExtension(context, ext) && DONE;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tmapValues(obj, key, oldValues, newValues) {\n\t\tlet fn = value => {\n\t\t\tlet index = oldValues.indexOf(value);\n\t\t\tif (index >= 0) {\n\t\t\t\treturn newValues[index];\n\t\t\t}\n\t\t\treturn value;\t\n\t\t};\n\t\tif (Array.isArray(obj[key])) {\n\t\t\tobj[key] = obj[key].map(fn);\n\t\t}\n\t\telse if (typeof obj[key] !== 'undefined') {\n\t\t\tobj[key] = fn(obj[key]);\n\t\t}\n\t\treturn true;\n\t},\n\n\tmapObject(obj, fn) {\n\t\tfor(let key in obj) {\n\t\t\tobj[key] = fn(obj[key], key);\n\t\t}\n\t},\n\n\tmoveTo(obj, key, context, fromSummary = false, mergedSummary = false) {\n\t\tlet condition;\n\t\tif (fromSummary) {\n\t\t\tif (mergedSummary) {\n\t\t\t\tcondition = val => Array.isArray(val);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcondition = val => Array.isArray(val) && val.length === 1;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tcondition = _.isDefined\n\t\t}\n\t\tif (condition(obj[key])) {\n\t\t\tcontext[key] = fromSummary && !mergedSummary ? obj[key][0] : obj[key];\n\t\t\tdelete obj[key];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\trunAll(migrations, obj, context, summaries) {\n\t\tfor(let fn in migrations) {\n\t\t\tif (!fn.startsWith('migrate')) {\n\t\t\t\tmigrations[fn](obj, context, summaries);\n\t\t\t}\n\t\t}\n\t},\n\n\ttoUTC(obj, key) {\n\t\tif (typeof obj[key] === 'string') {\n\t\t\ttry {\n\t\t\t\tobj[key] = this.toISOString(obj[key]);\n\t\t\t\treturn true;\n\t\t\t} catch(error) {}\n\t\t}\n\t\tdelete obj[key];\n\t\treturn false;\n\t},\n\n\ttoISOString(date) {\n\t\tif (!(date instanceof Date)) {\n\t\t\tdate = new Date(date);\n\t\t}\n\t\treturn date.toISOString().replace('.000', ''); // Don't export milliseconds if not needed\n\t}\n\n};\n\nvar Checksum = {\n\n\tmultihash: null,\n\n\thexToUint8(hexString) {\n\t\tif(hexString.length === 0 || hexString.length % 2 !== 0){\n\t\t\tthrow new Error(`The string \"${hexString}\" is not valid hex.`)\n\t\t}\n\t\treturn new Uint8Array(hexString.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\n\t},\n\n\tuint8ToHex(bytes) {\n\t\treturn bytes.reduce((str, byte) => str + byte.toString(16).padStart(2, '0'), '');\n\t},\n\n\ttoMultihash(obj, key, algo) {\n\t\tif (!Checksum.multihash || !_.is(obj[key], 'string')) {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\tconst encoded = Checksum.multihash.encode(Checksum.hexToUint8(obj[key]), algo);\n\t\t\tobj[key] = Checksum.uint8ToHex(encoded);\n\t\t\treturn true;\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n};\n\nvar Catalog = {\n\n\tmigrate(catalog, updateVersionNumber = true) {\n\t\tV.set(catalog);\n\t\tif (updateVersionNumber) {\n\t\t\tcatalog.stac_version = LATEST_VERSION;\n\t\t}\n\t\tcatalog.type = 'Catalog';\n\n\t\t_.ensure(catalog, 'stac_extensions', []) && DONE;\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(catalog) && DONE;\n\n\t\t_.ensure(catalog, 'id', '') && DONE;\n\t\t_.ensure(catalog, 'description', '') && DONE;\n\t\t_.ensure(catalog, 'links', []) && DONE;\n\n\t\t_.runAll(Catalog, catalog, catalog);\n\n\t\tV.before('0.8.0') && _.populateExtensions(catalog, 'catalog') && DONE;\n\n\t\treturn catalog;\n\t},\n\n};\n\nvar Collection = {\n\n\tmigrate(collection, updateVersionNumber = true) {\n\t\tCatalog.migrate(collection, updateVersionNumber); // Migrates stac_version, stac_extensions, id, title, description, links\n\t\tcollection.type = 'Collection';\n\t\t\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(collection) && DONE;\n\n\t\t_.ensure(collection, 'license', 'proprietary') && DONE;\n\t\t_.ensure(collection, 'extent', {\n\t\t\tspatial: {\n\t\t\t\tbbox: []\n\t\t\t},\n\t\t\ttemporal: {\n\t\t\t\tinterval: []\n\t\t\t}\n\t\t}) && DONE;\n\n\t\t_.runAll(Collection, collection, collection);\n\n\t\t// Migrate Commons extension - part 3\n\t\tif (_.isObject(collection.properties)) {\n\t\t\t_.removeFromArray(collection, 'stac_extensions', 'commons') && DONE;\n\t\t\tdelete collection.properties;\n\t\t}\n\n\t\tV.before('0.8.0') && _.populateExtensions(collection, 'collection') && DONE;\n\t\tV.before('1.0.0-beta.1') && _.mapValues(collection, 'stac_extensions', ['assets'], ['item-assets']) && DONE;\n\n\t\treturn collection;\n\t},\n\n\textent(collection) {\n\t\t_.ensure(collection, \"extent\", {});\n\n\t\tif (V.before('0.8.0')) {\n\t\t\t// Restructure spatial extent\n\t\t\tif (Array.isArray(collection.extent.spatial)) {\n\t\t\t\tcollection.extent.spatial = {\n\t\t\t\t\tbbox: [\n\t\t\t\t\t\tcollection.extent.spatial\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t}\n\t\t\t// Restructure temporal extent\n\t\t\tif (Array.isArray(collection.extent.temporal)) {\n\t\t\t\tcollection.extent.temporal = {\n\t\t\t\t\tinterval: [\n\t\t\t\t\t\tcollection.extent.temporal\n\t\t\t\t\t]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t_.ensure(collection.extent, \"spatial\", {});\n\t\t_.ensure(collection.extent.spatial, \"bbox\", []);\n\t\t_.ensure(collection.extent, \"temporal\", {});\n\t\t_.ensure(collection.extent.temporal, \"interval\", []);\n\n\t\tif (V.before('1.0.0-rc.3')) {\n\t\t\t// The first extent in a Collection is always the overall extent, followed by more specific extents.\n\t\t\tif (collection.extent.temporal.interval.length > 1) {\n\t\t\t\tlet min, max;\n\t\t\t\tfor(let interval of collection.extent.temporal.interval) {\n\t\t\t\t\tif (interval[0] === null) {\n\t\t\t\t\t\tmin = null;\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof interval[0] === 'string' && min !== null) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet start = new Date(interval[0]);\n\t\t\t\t\t\t\tif (typeof min === 'undefined' || start < min) {\n\t\t\t\t\t\t\t\tmin = start;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (interval[1] === null) {\n\t\t\t\t\t\tmax = null;\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof interval[1] === 'string' && max !== null) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tlet end = new Date(interval[1]);\n\t\t\t\t\t\t\tif (typeof max === 'undefined' || end > max) {\n\t\t\t\t\t\t\t\tmax = end;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {}\n\t\t\t\t\t} \n\t\t\t\t}\n\t\t\t\tcollection.extent.temporal.interval.unshift([\n\t\t\t\t\tmin ? _.toISOString(min) : null,\n\t\t\t\t\tmax ? _.toISOString(max) : null\n\t\t\t\t]);\n\t\t\t}\n\t\t\tif (collection.extent.spatial.bbox.length > 1) {\n\t\t\t\tlet count = collection.extent.spatial.bbox.reduce((val, bbox) => Array.isArray(bbox) ? Math.max(bbox.length, val) : val, 4);\n\t\t\t\tif (count >= 4) {\n\t\t\t\t\tlet union = new Array(count).fill(null);\n\t\t\t\t\tlet middle = count / 2;\n\t\t\t\t\tfor(let bbox of collection.extent.spatial.bbox) {\n\t\t\t\t\t\tif (!Array.isArray(bbox) || bbox.length < 4) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor(let i in bbox) {\n\t\t\t\t\t\t\tlet c = bbox[i];\n\t\t\t\t\t\t\tif (union[i] === null) {\n\t\t\t\t\t\t\t\tunion[i] = c;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (i < middle) {\n\t\t\t\t\t\t\t\tunion[i] = Math.min(c, union[i]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tunion[i] = Math.max(c, union[i]);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (union.findIndex(c => c === null) === -1) {\n\t\t\t\t\t\tcollection.extent.spatial.bbox.unshift(union);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tcollectionAssets(collection) {\n\t\tV.before('1.0.0-rc.1') && _.removeExtension(collection, 'collection-assets') && DONE;\n\n\t\tAsset.migrateAll(collection);\n\t},\n\n\titemAsset(collection) {\n\t\tV.before('1.0.0-beta.2') && _.rename(collection, 'item_assets', 'assets');\n\n\t\tAsset.migrateAll(collection, 'item_assets');\n\t},\n\n\tsummaries(collection) {\n\t\t_.ensure(collection, 'summaries', {});\n\n\t\t// other_properties: An early version of the Collection summaries with a similar structure\n\t\t// Was mostly used in standalone collections from openEO and GEE. Move other_properties to summaries.\n\t\tif (V.before('0.8.0') && _.isObject(collection.other_properties)) {\n\t\t\tfor(let key in collection.other_properties) {\n\t\t\t\tlet prop = collection.other_properties[key];\n\t\t\t\tif (Array.isArray(prop.extent) && prop.extent.length === 2) {\n\t\t\t\t\tcollection.summaries[key] = {\n\t\t\t\t\t\tminimum: prop.extent[0],\n\t\t\t\t\t\tmaximum: prop.extent[1],\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(prop.values)) {\n\t\t\t\t\tif (prop.values.filter(v => Array.isArray(v)).length === prop.values.length) {\n\t\t\t\t\t\t// If it is an array of arrays, merge the arrays\n\t\t\t\t\t\tcollection.summaries[key] = prop.values.reduce((a, b) => a.concat(b), []);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcollection.summaries[key] = prop.values;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tdelete collection.other_properties;\n\t\t}\n\n\t\t// Migrate Commons extension - part 2\n\t\t// Move properties to (single element) summaries if the Collection is standalone\n\t\t// see also https://github.com/stac-utils/stac-migrate/issues/3\n\t\tif (V.before('1.0.0-beta.1') && _.isObject(collection.properties) && !collection.links.find(link => ['child', 'item'].includes(link.rel))) {\n\t\t\tfor(let key in collection.properties) {\n\t\t\t\tlet value = collection.properties[key];\n\t\t\t\tif (!Array.isArray(value)) {\n\t\t\t\t\tvalue = [value];\n\t\t\t\t}\n\t\t\t\tcollection.summaries[key] = value;\n\t\t\t}\n\t\t}\n\n\t\tif (V.before('1.0.0-rc.1')) {\n\t\t\t_.mapObject(collection.summaries, val => {\n\t\t\t\t_.rename(val, 'min', 'minimum') && DONE;\n\t\t\t\t_.rename(val, 'max', 'maximum') && DONE;\n\t\t\t\treturn val;\n\t\t\t});\n\t\t}\n\n\t\t// now we can work on all summaries and migrate them\n\t\tFields.migrate(collection.summaries, collection, true);\n\n\t\t// Some fields should usually be on root-level if there's only one element\n\t\t_.moveTo(collection.summaries, 'sci:doi', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\n\t\t_.moveTo(collection.summaries, 'sci:publications', collection, true, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\n\t\t_.moveTo(collection.summaries, 'sci:citation', collection, true) && _.addExtension(collection, SCHEMAS.scientific) && DONE;\n\t\t_.moveTo(collection.summaries, 'cube:dimensions', collection, true) && _.addExtension(collection, SCHEMAS.datacube) && DONE;\n\n\t\t// Remove summary field if empty\n\t\tif (Object.keys(collection.summaries).length === 0) {\n\t\t\tdelete collection.summaries;\n\t\t}\n\t}\n\n};\n\nvar Item = {\n\n\tmigrate(item, collection = null, updateVersionNumber = true) {\n\t\tV.set(item);\n\t\tif (updateVersionNumber) {\n\t\t\titem.stac_version = LATEST_VERSION;\n\t\t}\n\n\t\t_.ensure(item, 'stac_extensions', []) && DONE;\n\t\tV.before('1.0.0-rc.1') && _.migrateExtensionShortnames(item) && DONE;\n\n\t\t_.ensure(item, 'id', '') && DONE;\n\t\t_.ensure(item, 'type', 'Feature') && DONE;\n\t\tif (!_.isObject(item.geometry)) {\n\t\t\titem.geometry = null;\n\t\t}\n\t\tif (item.geometry !== null) {\n\t\t\t_.ensure(item, 'bbox', []) && DONE;\n\t\t}\n\t\t_.ensure(item, 'properties', {}) && DONE;\n\t\t_.ensure(item, 'links', []) && DONE;\n\t\t_.ensure(item, 'assets', {}) && DONE;\n\n\t\t// Migrate Commons extension - part 1\n\t\tlet commons = false;\n\t\tif (_.isObject(collection) && _.isObject(collection.properties)) {\n\t\t\t_.removeFromArray(item, 'stac_extensions', 'commons');\n\t\t\titem.properties = Object.assign({}, collection.properties, item.properties);\n\t\t\tcommons = true;\n\t\t}\n\n\t\t_.runAll(Item, item, item);\n\n\t\tFields.migrate(item.properties, item);\n\n\t\tAsset.migrateAll(item);\n\n\t\t// Also populate extensions if commons has been implemented\n\t\t(V.before('0.8.0') || commons) && _.populateExtensions(item, 'item') && DONE;\n\n\t\treturn item;\n\t}\n\n};\n\nvar CollectionCollection = {\n\n\tmigrate(object, updateVersionNumber = true) {\n\t\t_.ensure(object, 'collections', []) && DONE;\n\t\t_.ensure(object, 'links', []) && DONE;\n\n\t\t_.runAll(CollectionCollection, object, object);\n\n\t\tobject.collections = object.collections.map(collection => Collection.migrate(collection, updateVersionNumber));\n\n\t\treturn object;\n\t},\n\n};\n\nvar ItemCollection = {\n\n\tmigrate(itemCollection, updateVersionNumber = true) {\n\t\t_.ensure(itemCollection, 'type', 'FeatureCollection') && DONE;\n\t\t_.ensure(itemCollection, 'features', []) && DONE;\n\t\t_.ensure(itemCollection, 'links', []) && DONE;\n\n\t\t_.runAll(ItemCollection, itemCollection, itemCollection);\n\n\t\titemCollection.features = itemCollection.features.map(feature => Item.migrate(feature, null, updateVersionNumber));\n\n\t\treturn itemCollection;\n\t},\n\n};\n\nvar Asset = {\n\n\tmigrateAll(context, field = 'assets') {\n\t\tfor(let key in context[field]) {\n\t\t\tAsset.migrate(context[field][key], context);\n\t\t}\n\t},\n\n\tmigrate(asset, context) {\n\t\t_.runAll(Asset, asset, context);\n\n\t\tFields.migrate(asset, context);\n\n\t\treturn asset;\n\t},\n\n\tmediaTypes(asset) {\n\t\t_.is(asset.type, 'string') && _.mapValues(\n\t\t\tasset, 'type',\n\t\t\t['image/vnd.stac.geotiff', \t\t\t'image/vnd.stac.geotiff; cloud-optimized=true'],\n\t\t\t['image/tiff; application=geotiff',\t'image/tiff; application=geotiff; profile=cloud-optimized']\n\t\t);\n\t},\n\n\teo(asset, context) {\n\t\tlet bands = _.isObject(context.properties) && Array.isArray(context.properties['eo:bands']) ? context.properties['eo:bands'] : [];\n\t\tif (Array.isArray(asset['eo:bands'])) {\n\t\t\tfor(let i in asset['eo:bands']) {\n\t\t\t\tlet band = asset['eo:bands'][i];\n\t\t\t\tif (_.is(band, 'number') && _.isObject(bands[band])) {\n\t\t\t\t\tband = bands[band];\n\t\t\t\t}\n\t\t\t\telse if (!_.isObject(band)) {\n\t\t\t\t\tband = {}; // \"Fix\" invalid band index\n\t\t\t\t}\n\t\t\t\tasset['eo:bands'][i] = band;\n\t\t\t}\n\t\t}\n\t}\n\n};\n\nvar Fields = {\n\n\tmigrate(obj, context, summaries = false) {\n\t\t_.runAll(Fields, obj, context, summaries);\n\n\t\treturn obj;\n\t},\n\n\t_commonMetadata(obj) {\n\t\t// Timestamps must be always in UTC\n\t\t// datetime, start_datetime and end_datetime already required UTC before\n\t\tif (V.before('1.0.0-rc.3')) {\n\t\t\t_.toUTC(obj, 'created') && DONE;\n\t\t\t_.toUTC(obj, 'updated') && DONE;\n\t\t}\n\t},\n\n\t_timestamps(obj, context) {\n\t\t// Timestamps must be always in UTC\n\t\t_.toUTC(obj, 'published') && DONE;\n\t\t_.toUTC(obj, 'expires') && DONE;\n\t\t_.toUTC(obj, 'unpublished') && DONE;\n\n\t\t_.upgradeExtension(context, SCHEMAS.timestamps);\n\t},\n\n\t_versioningIndicator(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.version);\n\t},\n\n\tchecksum(obj, context) {\n\t\tif (V.before('0.9.0') && Checksum.multihash) {\n\t\t\t_.rename(obj, 'checksum:md5', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'md5') && DONE;\n\t\t\t_.rename(obj, 'checksum:sha1', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha1') && DONE;\n\t\t\t// We assume sha2/3-256 although that may fail in some cases and other lengths are chosen\n\t\t\t// Never seen this implemtned in the wild, so let's try this until another use case comes up\n\t\t\t_.rename(obj, 'checksum:sha2', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha2-256') && DONE;\n\t\t\t_.rename(obj, 'checksum:sha3', 'checksum:multihash') && Checksum.toMultihash(obj, 'checksum:multihash', 'sha3-256') && DONE;\n\t\t}\n\n\t\tV.before('1.0.0-rc.1') && _.rename(obj, 'checksum:multihash', 'file:checksum') && _.addExtension(context, SCHEMAS.file) && DONE;\n\n\t\t_.removeExtension(context, 'checksum');\n\t},\n\n\tclassification(obj, context) {\n\t\tif (V.before('1.1.0', 'classification')) {\n\t\t\t_.forAll(obj, 'classification:classes', o => _.rename(o, 'color-hint', 'color_hint')) && DONE;\n\t\t}\n\n\t\t_.upgradeExtension(context, SCHEMAS.classification);\n\t},\n\n\tcube(obj, context) {\n\t\t// We'd need to convert proj strings to something else for v1.0 -> v2.0, but that's unfeasible here.\n\t\t// Nothing else to do here.\n\n\t\t_.upgradeExtension(context, SCHEMAS.datacube);\n\t},\n\n\tdtr(obj, context) {\n\t\tif (V.before('0.9.0')) {\n\t\t\t_.rename(obj, 'dtr:start_datetime', 'start_datetime') && DONE;\n\t\t\t_.rename(obj, 'dtr:end_datetime', 'end_datetime') && DONE;\n\t\t\t_.removeExtension(context, 'datetime-range') && DONE;\n\t\t}\n\t},\n\n\teo(obj, context) {\n\t\tif (V.before('0.9.0')) {\n\t\t\t_.rename(obj, 'eo:epsg', 'proj:epsg') && _.addExtension(context, SCHEMAS.projection) && DONE;\n\t\t\t_.rename(obj, 'eo:platform', 'platform') && DONE;\n\t\t\t_.rename(obj, 'eo:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\n\t\t\t_.rename(obj, 'eo:constellation', 'constellation') && DONE;\n\t\t\t_.rename(obj, 'eo:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t\t_.rename(obj, 'eo:azimuth', 'view:azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t\t_.rename(obj, 'eo:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t\t_.rename(obj, 'eo:sun_azimuth', 'view:sun_azimuth') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t\t_.rename(obj, 'eo:sun_elevation', 'view:sun_elevation') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t}\n\n\t\tV.before('1.0.0-beta.1') && _.rename(obj, 'eo:gsd', 'gsd') && DONE;\n\n\t\t_.upgradeExtension(context, SCHEMAS.eo);\n\t},\n\n\tfile(obj, context) {\n\t\t// TODO: Migrate to v2.1.0 - https://github.com/stac-utils/stac-migrate/issues/7\n\n\t\t_.upgradeExtension(context, SCHEMAS.file);\n\t},\n\n\tlabel(obj, context) {\n\t\t// Migrate 0.8.0-rc1 non-pluralized forms\n\t\tif (V.before('0.8.0')) {\n\t\t\t_.rename(obj, 'label:property', 'label:properties') && DONE;\n\t\t\t_.rename(obj, 'label:task', 'label:tasks') && DONE;\n\t\t\t_.rename(obj, 'label:overview', 'label:overviews') && _.toArray(obj, 'label:overviews') && DONE;\n\t\t\t_.rename(obj, 'label:method', 'label:methods') && DONE;\n\t\t\t_.toArray(obj, 'label:classes') && DONE;\n\t\t}\n\n\t\t_.upgradeExtension(context, SCHEMAS.label);\n\t},\n\n\tpc(obj, context) {\n\t\tV.before('0.8.0') && _.rename(obj, 'pc:schema', 'pc:schemas') && DONE;\n\n\t\t_.upgradeExtension(context, SCHEMAS.pointcloud);\n\t},\n\n\tprocessing(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.processing);\n\t},\n\n\tproj(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.projection);\n\t},\n\n\traster(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.raster);\n\t},\n\n\tsar(obj, context, summary) {\n\t\t// Which version have they been (re)moved?\n\t\t_.rename(obj, 'sar:incidence_angle', 'view:incidence_angle') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t_.rename(obj, 'sar:pass_direction', 'sat:orbit_state') && _.mapValues(obj, 'sat:orbit_state', [null], ['geostationary']) && _.addExtension(context, SCHEMAS.sat) && DONE;\n\n\t\tif (V.before('0.7.0')) {\n\t\t\t_.flattenArray(obj, 'sar:resolution', ['sar:resolution_range', 'sar:resolution_azimuth'], summary) && DONE;\n\t\t\t_.flattenArray(obj, 'sar:pixel_spacing', ['sar:pixel_spacing_range', 'sar:pixel_spacing_azimuth'], summary) && DONE;\n\t\t\t_.flattenArray(obj, 'sar:looks', ['sar:looks_range', 'sar:looks_azimuth', 'sar:looks_equivalent_number'], summary) && DONE;\n\t\t\t_.rename(obj, 'sar:off_nadir', 'view:off_nadir') && _.addExtension(context, SCHEMAS.view) && DONE;\n\t\t}\n\n\t\tif (V.before('0.9.0')) {\n\t\t\t_.rename(obj, 'sar:platform', 'platform') && DONE;\n\t\t\t_.rename(obj, 'sar:instrument', 'instruments') && _.toArray(obj, 'instruments') && DONE;\n\t\t\t_.rename(obj, 'sar:constellation', 'constellation') && DONE;\n\t\t\t_.rename(obj, 'sar:type', 'sar:product_type') && DONE;\n\t\t\t_.rename(obj, 'sar:polarization', 'sar:polarizations') && DONE;\n\t\t\t_.flattenOneElementArray(obj, 'sar:absolute_orbit', summary) && _.rename(obj, 'sar:absolute_orbit', 'sat:absolute_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\n\t\t\t_.flattenOneElementArray(obj, 'sar:relative_orbit', summary) && _.rename(obj, 'sar:relative_orbit', 'sat:relative_orbit') && _.addExtension(context, SCHEMAS.sat) && DONE;\n\t\t}\n\n\t\t_.upgradeExtension(context, SCHEMAS.sar);\n\t},\n\n\tsat(obj, context) {\n\t\t// Migrate 0.9.0-rc _angle suffixes\n\t\tif (V.before('0.9.0')) {\n\t\t\t_.rename(obj, 'sat:off_nadir_angle', 'sat:off_nadir') && DONE;\n\t\t\t_.rename(obj, 'sat:azimuth_angle', 'sat:azimuth') && DONE;\n\t\t\t_.rename(obj, 'sat:sun_azimuth_angle', 'sat:sun_azimuth') && DONE;\n\t\t\t_.rename(obj, 'sat:sun_elevation_angle', 'sat:sun_elevation') && DONE;\n\t\t}\n\n\t\t_.upgradeExtension(context, SCHEMAS.sat);\n\t},\n\n\tsci(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.scientific);\n\t},\n\n\titem(obj) { // Single Item\n\t\tif (V.before('0.8.0')) {\n\t\t\t_.rename(obj, 'item:license', 'license') && DONE;\n\t\t\t_.rename(obj, 'item:providers', 'providers') && DONE;\n\t\t\t// No need to remove the extension from stac_extensions as it was not available before 0.8.0\n\t\t}\n\t},\n\n\ttable(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.table);\n\t},\n\n\tview(obj, context) {\n\t\t// Nothing to do\n\n\t\t_.upgradeExtension(context, SCHEMAS.view);\n\t}\n\n};\n\nvar Migrate = {\n\n\titem(item, collection = null, updateVersionNumber = true) {\n\t\treturn Item.migrate(item, collection, updateVersionNumber);\n\t},\n\t\n\tcatalog(catalog, updateVersionNumber = true) {\n\t\treturn Catalog.migrate(catalog, updateVersionNumber);\n\t},\n\t\n\tcollection(collection, updateVersionNumber = true) {\n\t\treturn Collection.migrate(collection, updateVersionNumber);\n\t},\n\n\tcollectionCollection(collections, updateVersionNumber = true) {\n\t\treturn CollectionCollection.migrate(collections, updateVersionNumber);\n\t},\n\n\titemCollection(itemCollection, updateVersionNumber = true) {\n\t\treturn ItemCollection.migrate(itemCollection, updateVersionNumber);\n\t},\n\t\n\tstac(object, updateVersionNumber = true) {\n\t\tif (object.type === 'Feature') {\n\t\t\treturn Migrate.item(object, null, updateVersionNumber);\n\t\t}\n\t\telse if (object.type === 'FeatureCollection') {\n\t\t\treturn Migrate.itemCollection(object, updateVersionNumber);\n\t\t}\n\t\telse if (object.type === 'Collection' || (!object.type && _.isDefined(object.extent) && _.isDefined(object.license))) {\n\t\t\treturn Migrate.collection(object, updateVersionNumber);\n\t\t}\n\t\telse if (!object.type && Array.isArray(object.collections)) {\n\t\t\treturn Migrate.collectionCollection(object, updateVersionNumber);\n\t\t}\n\t\telse {\n\t\t\treturn Migrate.catalog(object, updateVersionNumber);\n\t\t}\n\t},\n\n\tenableMultihash(multihash) {\n\t\tChecksum.multihash = multihash;\n\t}\n\n};\n\nmodule.exports = Migrate;\n","/**\n * Checks whether a variable is a string and contains at least one character.\n * \n * @param {*} string - A variable to check.\n * @returns {boolean} - `true` is the given variable is an string with length > 0, `false` otherwise.\n */\nexport function hasText(string) {\n  return (typeof string === 'string' && string.length > 0);\n}\n\n/**\n * Checks whether a variable is a real object or not.\n * \n * This is a more strict version of `typeof x === 'object'` as this example would also succeeds for arrays and `null`.\n * This function only returns `true` for real objects and not for arrays, `null` or any other data types.\n * \n * @param {*} obj - A variable to check.\n * @returns {boolean} - `true` is the given variable is an object, `false` otherwise.\n */\nexport function isObject(obj) {\n  return (typeof obj === 'object' && obj === Object(obj) && !Array.isArray(obj));\n}\n\n/**\n * Merges any number of arrays of objects.\n * \n * @param  {...Array.<Object>} bands \n * @returns {Array.<Object>}\n */\nexport function mergeArraysOfObjects(...bands) {\n  bands = bands.filter(arr => Array.isArray(arr));\n  if (bands.length > 1) {\n    let length = Math.max(...bands.map(arr => arr.length));\n    let merged = [];\n    for(let i = 0; i < length; i++) {\n      merged.push(Object.assign({}, ...bands.map(band => band[i])));\n    }\n    return merged;\n  }\n  else if (bands.length === 1) {\n    return bands[0];\n  }\n  return [];\n}\n\n/**\n * Get minimum values for the STAC data types.\n * \n * Currently only supports int types.\n * \n * @private\n * @todo Add float support\n * @param {string} str Data type\n * @returns {number|null} Minimum value\n */\nexport function getMinForDataType(str) {\n  switch(str) {\n    case \"int8\":\n      return -128;\n    case \"int16\":\n      return -32768;\n    case \"int32\":\n      return -2147483648;\n  }\n  if (str.startsWith(\"u\")) {\n    return 0;\n  }\n  return null;\n}\n\n/**\n * Get maximum values for the STAC data types.\n * \n * Currently only supports int types.\n * \n * @private\n * @todo Add float support\n * @param {string} str Data type\n * @returns {number|null} Maximum value\n */\nexport function getMaxForDataType(str) {\n  switch(str) {\n    case \"int8\":\n      return 127;\n    case \"uint8\":\n      return 255;\n    case \"int16\":\n      return 32767;\n    case \"uint16\":\n      return 65535;\n    case \"int32\":\n      return 2147483647;\n    case \"uint32\":\n      return 4294967295;\n  }\n  return null;\n}\n","import { isObject } from './utils.js';\n\n/**\n * Base class for STAC objects.\n * \n * Don't instantiate this class!\n * \n * @interface\n * @param {Object} data The STAC object\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass STACObject {\n\n  constructor(data, keyMap = {}, privateKeys = []) {\n    if (!isObject(data)) {\n      throw new Error('Given data is not an object');\n    }\n\n    if (data instanceof STACObject) {\n      for(let key of privateKeys) {\n        this[key] = data[key];\n      }\n      data = data.toJSON();\n    }\n\n    // Map with functions that convert properties to stac-js objects\n    this._keyMap = keyMap;\n    // Array with keys that are used internally and should be cloned\n    this._privateKeys = ['_keyMap', '_privateKeys'].concat(privateKeys);\n\n    // Assign the data to the object\n    for (let key in data) {\n      if (typeof this[key] === 'undefined') {\n        if (key in keyMap) {\n          this[key] = keyMap[key](data[key], this);\n        }\n        else {\n          this[key] = data[key];\n        }\n      }\n    }\n  }\n\n  /**\n   * Check whether this given object is a STAC Item.\n   * \n   * @returns {boolean} `true` if the object is a STAC Item, `false` otherwise.\n   */\n  isItem() {\n    return this.type === 'Feature';\n  }\n\n  /**\n   * Check whether this given object is a STAC Catalog.\n   * \n   * @returns {boolean} `true` if the object is a STAC Catalog, `false` otherwise.\n   */\n  isCatalog() {\n    return this.type === 'Catalog';\n  }\n\n  /**\n   * Check whether this given object is \"catalog-like\", i.e. a Catalog or Collection.\n   * \n   * @returns {boolean} `true` if the object is a \"catalog-like\", `false` otherwise.\n   */\n  isCatalogLike() {\n    return this.isCatalog() || this.isCollection();\n  }\n\n  /**\n   * Check whether this given object is a STAC Collection.\n   * \n   * @returns {boolean} `true` if the object is a STAC Collection, `false` otherwise.\n   */\n  isCollection() {\n    return this.type === 'Collection';\n  }\n\n  /**\n   * Check whether this given object is a STAC ItemCollection.\n   * \n   * @returns {boolean} `true` if the object is a STAC ItemCollection, `false` otherwise.\n   */\n  isItemCollection() {\n    return this.type === 'FeatureCollection';\n  }\n\n  /**\n   * Check whether this given object is a STAC Collection of Collections (i.e. API Collections).\n   * \n   * @returns {boolean} `true` if the object is a STAC CollectionCollection, `false` otherwise.\n   */\n  isCollectionCollection() {\n    return false;\n  }\n\n  /**\n   * Check whether this given object is a STAC Asset.\n   * \n   * @returns {boolean} `true` if the object is a STAC Asset, `false` otherwise.\n   */\n  isAsset() {\n    return false;\n  }\n\n  /**\n   * Check whether this given object is a STAC LInk.\n   * \n   * @returns {boolean} `true` if the object is a STAC Link, `false` otherwise.\n   */\n  isLink() {\n    return false;\n  }\n\n  /**\n   * Returns the type of the STAC object.\n   * \n   * One of:\n   * - Asset\n   * - Catalog\n   * - Collection\n   * - CollectionCollection\n   * - Item\n   * - ItemCollection\n   * - Link\n   * @abstract\n   * @returns {string}\n   */\n  getObjectType() {\n    return;\n  }\n\n  /**\n   * Gets the absolute URL of the STAC entity (if provided explicitly or available from the self link).\n   * \n   * @returns {string|null} Absolute URL\n   */\n  getAbsoluteUrl() {\n    return null;\n  }\n\n  /**\n   * Returns the metadata for the STAC entity.\n   * \n   * @param {string} field Field name\n   * @returns {*}\n   */\n  getMetadata(field) {\n    return this[field];\n  }\n\n  /**\n   * Returns a GeoJSON Feature or FeatureCollection for this STAC object.\n   * \n   * @returns {Object|null} GeoJSON object or `null`\n   */\n  toGeoJSON() {\n    return null;\n  }\n\n  /**\n   * Returns a single bounding box for the STAC entity.\n   * \n   * @returns {BoundingBox|null}\n   */\n  getBoundingBox() {\n    return null;\n  }\n\n  /**\n   * Returns a list of bounding boxes for the STAC entity.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getBoundingBoxes() {\n    return [];\n  }\n\n  /**\n   * Returns a plain object for JSON export.\n   * \n   * @returns {Object} Plain object\n   */\n  toJSON() {\n    let obj = {};\n    Object.keys(this).forEach(key => {\n      if (typeof this[key] === 'function' || this._privateKeys.includes(key)) {\n        return;\n      }\n      let v = this[key];\n      if (key in this._keyMap) {\n        let v2 = Array.isArray(v) ? [] : {};\n        for(let key in v) {\n          v2[key] = v[key].toJSON();\n        }\n        v = v2;\n      }\n      obj[key] = v;\n    });\n    return obj;\n  }\n  \n}\n\nexport default STACObject;\n","import URI from 'urijs';\n\n/**\n * Protocols supported by browsers (http and https).\n * \n * @type {Array.<string>}\n */\nexport const browserProtocols = [\n  'http',\n  'https'\n];\n\n/**\n * Checks whether a URI is a GDAL Virtual Filesystem URI.\n * \n * Such an URI usually starts with `/vsi` (except for `/vsicurl/`).\n * \n * @param {string} href \n * @returns {boolean} `true` if an GDAL Virtual Filesystem URI, `false` otherwise.\n */\nexport function isGdalVfsUri(href) {\n  return typeof href === 'string' && href.startsWith('/vsi') && !href.startsWith('/vsicurl/');\n}\n\n/**\n * \n * @todo\n * @param {string} href \n * @param {string} baseUrl \n * @param {boolean} stringify \n * @returns {string|URI}\n */\nexport function toAbsolute(href, baseUrl, stringify = true) {\n  return normalizeUri(href, baseUrl, false, stringify);\n}\n\n/**\n * \n * @todo\n * @param {string} href \n * @param {string|null} baseUrl \n * @param {boolean} noParams \n * @param {boolean} stringify \n * @returns {string|URI}\n */\nexport function normalizeUri(href, baseUrl = null, noParams = false, stringify = true) {\n  // Convert vsicurl URLs to normal URLs\n  if (typeof href === 'string' && href.startsWith('/vsicurl/')) {\n    href = href.replace(/^\\/vsicurl\\//, '');\n  }\n  // Parse URL and make absolute, if required\n  let uri = URI(href);\n  if (baseUrl && uri.is(\"relative\") && !isGdalVfsUri(href)) { // Don't convert GDAL VFS URIs: https://github.com/radiantearth/stac-browser/issues/116\n    // Avoid that baseUrls that have a . in the last parth part will be removed (e.g. https://example.com/api/v1.0 )\n    let baseUri = URI(baseUrl);\n    let baseUriPath = baseUri.path();\n    if (!baseUriPath.endsWith('/') && !baseUriPath.endsWith('.json')) {\n      baseUri.path(baseUriPath + '/');\n    }\n    uri = uri.absoluteTo(baseUri);\n  }\n  // Normalize URL and remove trailing slash from path\n  // to avoid handling the same resource twice\n  uri.normalize();\n  if (noParams) {\n    uri.query(\"\");\n    uri.fragment(\"\");\n  }\n  return stringify ? uri.toString() : uri;\n}\n","/**\n * The GeoJSON media type.\n * \n * @type {string}\n */\nexport const geojsonMediaType = 'application/geo+json';\n\n/**\n * All STAC media types (JSON + GeoJSON).\n * \n * @type {Array.<string>}\n */\nexport const stacMediaTypes = [\n  'application/json',\n  geojsonMediaType,\n  'text/json'\n];\n\n/**\n * All image media types that Web Browsers can show (GIF, JPEG, PNG, WebP).\n * \n * @type {Array.<string>}\n */\nexport const browserImageTypes = [\n  'image/gif',\n  'image/jpeg',\n  'image/apng',\n  'image/png',\n  'image/webp'\n];\n\n/**\n * All Cloud Optimized GeoTiff media types.\n * \n * @type {Array.<string>}\n */\nexport const cogMediaTypes = [\n  'image/tiff; application=geotiff; profile=cloud-optimized',\n  'image/vnd.stac.geotiff; cloud-optimized=true'\n];\n\n/**\n * All GeoTiff media types (including COG media types).\n * \n * @type {Array.<string>}\n */\nexport const geotiffMediaTypes = [\n  'application/geotiff',\n  'image/tiff; application=geotiff',\n  'image/vnd.stac.geotiff',\n].concat(cogMediaTypes);\n\n/**\n * All image media types combined (Web Browser + GeoTiff).\n * \n * @type {Array.<string>}\n */\nexport const imageMediaTypes = browserImageTypes.concat(geotiffMediaTypes);\n\n/**\n * Checks whether a given media type is in the list of media types.\n * \n * @param {string|undefined} type The potential media type.\n * @param {string|Array.<string>} allowedTypes A list of allowed media types (or a single media type as string).\n * @param {boolean} allowUndefined If set to `true`, returns `true` if `undefined` is passed as `type`.\n * @returns {boolean} `true` if the media type is allowed, `false` otherwise.\n */\nexport function isMediaType(type, allowedTypes, allowUndefined = false) {\n  if (!Array.isArray(allowedTypes)) {\n    allowedTypes = [allowedTypes];\n  }\n  if (allowUndefined && typeof type === 'undefined') {\n    return true;\n  }\n  else if (typeof type !== 'string') {\n    return false;\n  }\n  else {\n    allowedTypes = allowedTypes.map(type => type.toLowerCase());\n    return allowedTypes.includes(type.toLowerCase());\n  }\n}\n\n/**\n * Checks whether the given media type is a STAC media type (JSON or GeoJSON).\n * \n * @param {string|undefined} type The potential media type.\n * @param {boolean} allowUndefined If set to `true`, returns `true` if `undefined` is passed as `type`.\n * @returns {boolean} `true` if the media type is a STAC media type, `false` otherwise.\n */\nexport function isStacMediaType(type, allowUndefined = false) {\n  return isMediaType(type, stacMediaTypes, allowUndefined);\n}\n","import { browserProtocols, toAbsolute } from './http.js';\nimport { cogMediaTypes, geotiffMediaTypes, isMediaType } from \"./mediatypes.js\";\nimport { hasText } from './utils.js';\nimport STACObject from './object.js';\nimport URI from 'urijs';\nimport { browserImageTypes } from './mediatypes.js';\n\n/**\n * A STAC reference as base for Assets and Links.\n * \n * Don't instantiate this class!\n * \n * @interface\n * @property {string} href\n * @property {?string} type\n * \n * @param {Object} data The STAC API Collection object\n * @param {STAC|null} context The object that contains the link\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass STACReference extends STACObject {\n\n  constructor(data, context = null, keyMap = {}, privateKeys = []) {\n    super(data, keyMap, ['_context'].concat(privateKeys));\n    if (!this._context) {\n      this._context = context;\n    }\n  }\n\n  /**\n   * Gets the URL of the reference as absolute URL.\n   * \n   * @param {boolean} stringify \n   * @returns {string|null}\n   */\n  getAbsoluteUrl(stringify = true) {\n    if (this._context) {\n      return toAbsolute(this.href, this._context.getAbsoluteUrl(), stringify);\n    }\n    else if (this.href.includes('://')) {\n      return this.href;\n    }\n    return null;\n  }\n\n  /**\n   * Returns the STAC entity that contains the reference.\n   * \n   * @returns {STAC|null}\n   */\n  getContext() {\n    return this._context;\n  }\n\n  /**\n   * Checks whether a given reference can be displayed by a browser.\n   * \n   * A browser can usually display an image if it is a specific file format (e.g. JPEG, PNG, ...) and is served over HTTP(S).\n   * \n   * @returns {boolean} `true` if a browser can display the given reference, `false` otherwise.\n   * @see {canBrowserDisplayImage}\n   */\n  canBrowserDisplayImage(allowUndefined = false) {\n    if (typeof this.href !== 'string') {\n      return false;\n    }\n    else if (!allowUndefined && typeof this.type === 'undefined') {\n      return false;\n    }\n    let uri = new URI(this.href);\n    let protocol = uri.protocol().toLowerCase();\n    let extension = uri.suffix().toLowerCase();\n    if (hasText(protocol) && !browserProtocols.includes(protocol)) {\n      return false;\n    }\n    else if (hasText(this.type) && browserImageTypes.includes(this.type.toLowerCase())) {\n      return true;\n    }\n    else if (typeof this.type === 'undefined' && hasText(extension) && (extension === 'jpg' || browserImageTypes.includes('image/' + extension))) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  /**\n   * Checks whether this asset is of a specific type.\n   * \n   * @param {string|Array.<string>} types One or more media types.\n   * @returns {boolean} `true` is this asset is one of the given types, `false` otherwise.\n   */\n  isType(types) { // string or array of strings\n    return hasText(this.type) && isMediaType(this.type, types);\n  }\n\n  /**\n   * Checks whether this asset is a GeoTiff (including COGs).\n   * \n   * @returns {boolean} `true` is this asset is a GeoTiff, `false` otherwise.\n   */\n  isGeoTIFF() {\n    return this.isType(geotiffMediaTypes);\n  }\n\n  /**\n   * Checks whether this asset is a COG (excluding pure GeoTiffs).\n   * \n   * @returns {boolean} `true` is this asset is a COG, `false` otherwise.\n   */\n  isCOG() {\n    return this.isType(cogMediaTypes);\n  }\n\n  /**\n   * Checks whether the asset is accessible via HTTP or HTTPS.\n   * \n   * Returns `null` for item asset definitions, otherwise a `boolean` value.\n   * \n   * @returns {boolean|null} `true` is this asset is available via HTTP or HTTPS, `false` or `null` otherwise.\n   */\n  isHTTP() {\n    let uri = this.getAbsoluteUrl(false);\n    let protocol = uri.protocol().toLowerCase();\n    return hasText(protocol) && browserProtocols.includes(protocol);\n  }\n  \n}\n\nexport default STACReference;\n","import STACReference from './reference.js';\nimport { isObject } from './utils.js';\n\n/**\n * A STAC Link object.\n * \n * You can access all properties of the given STAC Link object directly, e.g. `link.href`.\n * \n * @class\n * @property {string} href\n * @property {string} rel\n * @property {?string} type\n * @property {?string} title\n * @property {?string} method\n * @property {?Object.<string, string>} headers\n * @property {?Object} body\n * @property {?boolean} merge\n * \n * @param {Object|Link} data The STAC Link object\n * @param {STAC|null} context The object that contains the link\n */\nclass Link extends STACReference {\n\n  constructor(data, context = null) {\n    super(data, context);\n  }\n  \n  /**\n   * Check whether this given object is a STAC LInk.\n   * \n   * @returns {boolean} `true` if the object is a STAC Link, `false` otherwise.\n   */\n  isLink() {\n    return true;\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'Link'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return \"Link\";\n  }\n\n  /**\n   * Converts an array of STAC Links into an array of stac-js Links.\n   * \n   * @param {Array.<Object>} links Links\n   * @param {STAC|null} context The object that contains the links\n   * @returns {Array.<Link>} Improved Links\n   */\n  static fromLinks(links, context = null) {\n    if(!Array.isArray(links)) {\n      return [];\n    }\n    return links.map(link => isObject(link) ? new Link(link, context) : link);\n  }\n\n}\n\nexport default Link;\n","import STACObject from './object.js';\nimport Link from './link.js';\nimport { isStacMediaType } from './mediatypes.js';\nimport { hasText, isObject } from './utils.js';\n\n/**\n * STAC Hypermedia class for STAC objects.\n * \n * Don't instantiate this class!\n * \n * @interface\n * @property {Array.<Link>} links\n * \n * @param {Object} data The STAC object\n * @param {string|null} absoluteUrl Absolute URL of the STAC object\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass STACHypermedia extends STACObject {\n\n  constructor(data, absoluteUrl = null, keyMap = {}, privateKeys = []) {\n    super(\n      data,\n      Object.assign({ links: Link.fromLinks }, keyMap),\n      ['_url'].concat(privateKeys)\n    );\n\n    // Set or detect the URL of the STAC entity\n    if (!this._url) {\n      this._url = absoluteUrl;\n      if (!this._url) {\n        let self = this.getSelfLink();\n        if (self) {\n          this._url = self.href;\n        }\n      }\n    }\n  }\n\n  /**\n   * Gets the absolute URL of the STAC entity (if provided explicitly or available from the self link).\n   * \n   * @returns {string|null} Absolute URL\n   */\n  getAbsoluteUrl() {\n    return this._url;\n  }\n\n  /**\n   * Sets the absolute URL of the STAC entity.\n   * \n   * @param {string} url Absolute URL\n   */\n  setAbsoluteUrl(url) {\n    this._url = url;\n  }\n\n  /**\n   * \n   * @todo\n   * @param {string} rel \n   * @param {boolean} allowUndefined \n   * @returns {Array.<Link>}\n   */\n  getStacLinksWithRel(rel, allowUndefined = true) {\n    return this.getLinksWithRels([rel])\n      .filter(link => isStacMediaType(link.type, allowUndefined));\n  }\n\n  /**\n   * \n   * @todo\n   * @param {string} rel \n   * @param {boolean} allowUndefined \n   * @returns {Link} \n   */\n  getStacLinkWithRel(rel, allowUndefined = true) {\n    const links = this.getStacLinksWithRel(rel, allowUndefined);\n    if (links.length > 0) {\n      return links[0];\n    }\n    else {\n      return null;\n    }\n  }\n  \n  /**\n   * \n   * @todo\n   * @returns {Array.<Link>}\n   */\n  getLinks() {\n    return Array.isArray(this.links) ? this.links.filter(link => isObject(link) && hasText(link.href)) : [];\n  }\n\n  /**\n   * \n   * @todo\n   * @param {string} rel \n   * @returns {Link} \n   */\n  getLinkWithRel(rel) {\n    return this.getLinks().find(link => link.rel === rel) || null;\n  }\n\n  /**\n   * \n   * @todo\n   * @param {Array.<string>} rels \n   * @returns {Array.<Link>} \n   */\n  getLinksWithRels(rels) {\n    return this.getLinks().filter(link => rels.includes(link.rel));\n  }\n\n  /**\n   * \n   * @todo\n   * @param {Array.<string>} rels \n   * @returns {Array.<Link>} \n   */\n  getLinksWithOtherRels(rels) {\n    return this.getLinks().filter(link => !rels.includes(link.rel));\n  }\n\n  /**\n   * Returns the self link, if present.\n   * \n   * @returns {Link|null} The self link\n   */\n  getSelfLink() {\n    return this.getStacLinkWithRel('self');\n  }\n\n  /**\n   * Returns the root link, if present.\n   * \n   * @returns {Link|null} The root link\n   */\n  getRootLink() {\n    return this.getStacLinkWithRel('root');\n  }\n\n  /**\n   * Returns the parent link, if present.\n   * \n   * @returns {Link|null} The parent link\n   */\n  getParentLink() {\n    return this.getStacLinkWithRel('parent');\n  }\n  \n}\n\nexport default STACHypermedia;\n","import STACHypermedia from './hypermedia.js';\n\n/**\n * A STAC API Collection (i.e. an ItemCollection or a CollectionCollection)\n * \n * You can access all properties of the given STAC Catalog object directly, e.g. `collection.links`.\n * \n * Don't instantiate this class!\n * \n * @interface\n * @param {Object} data The STAC API Collection object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Item Collection\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass APICollection extends STACHypermedia {\n\n  constructor(data, absoluteUrl = null, keyMap = {}, privateKeys = []) {\n    super(data, absoluteUrl, keyMap, privateKeys);\n  }\n\n  /**\n   * Returns all STAC entities in this list.\n   * \n   * @returns {Array.<STAC>} All STAC entities\n   */\n  getAll() {\n    return [];\n  }\n\n}\n\nexport default APICollection;\n","import { getMaxForDataType, getMinForDataType, hasText, isObject, mergeArraysOfObjects } from \"./utils.js\";\nimport STACReference from './reference.js';\n\n/**\n * A STAC Asset or Item Asset Definition.\n * \n * You can access all properties of the given STAC Asset object directly, e.g. `asset.href`.\n * \n * @class\n * @property {string} href\n * @property {?string} title\n * @property {?string} description\n * @property {?string} type\n * @property {?Array.<string>} roles\n * \n * @param {Object|Asset} data The STAC Asset object\n * @param {string} key The asset key\n * @param {Collection|Item|null} context The object that contains the asset\n */\nclass Asset extends STACReference {\n\n  constructor(data, key = null, context = null) {\n    super(data, context, {}, ['_key']);\n    if (!this._key) {\n      this._key = key;\n    }\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'Asset'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return \"Asset\";\n  }\n\n  /**\n   * Check whether this given object is a STAC Asset.\n   * \n   * @returns {boolean} `true` if the object is a STAC Asset, `false` otherwise.\n   */\n  isAsset() {\n    return true;\n  }\n\n  /**\n   * Gets the URL of the asset as absolute URL.\n   * \n   * @param {boolean} stringify \n   * @returns {URI|string|null}\n   */\n  getAbsoluteUrl(stringify = true) {\n    if (this.isDefintion()) {\n      return null;\n    }\n    return super.getAbsoluteUrl(stringify);\n  }\n\n  /**\n   * Returns the key of the asset.\n   * \n   * @returns {string|null} Key of the asset\n   */\n  getKey() {\n    return this._key;\n  }\n\n  /**\n   * Returns the metadata for the given field name.\n   * \n   * Returns the metadata from the asset, if present.\n   * Otherwise, returns the metadata from calling `getMetadata()` on the STAC entity that contains the asset.\n   * \n   * @param {string} field Field name\n   * @returns {*} The value of the field\n   */\n  getMetadata(field) {\n    if (typeof this[field] !== 'undefined') {\n      return this[field];\n    }\n    if (this._context) {\n      return this._context.getMetadata(field);\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns the bands for the asset.\n   * \n   * This is usually a merge of eo:bands and raster:bands.\n   * \n   * @returns {Array.<Object>}\n   */\n  getBands() {\n    return mergeArraysOfObjects(this['eo:bands'], this['raster:bands']);\n  }\n\n  /**\n   * The RGB bands.\n   * \n   * @typedef {Object} VisualBands\n   * @property {BandWithIndex} red The red band with its index\n   * @property {BandWithIndex} green The green band with its index\n   * @property {BandWithIndex} blue The blue band with its index\n   */\n\n  /**\n   * Find the RGB bands.\n   * \n   * @returns {VisualBands|null} Object with the RGB bands or null\n   */\n  findVisualBands() {\n    let rgb = {\n      red: null,\n      green: null,\n      blue: null\n    };\n    let bands = this.getBands();\n    for(let key in bands) {\n      let index = parseInt(key, 10); // findIndex returns number, for loop uses strings?!\n      let band = bands[index];\n      if (isObject(band) && hasText(band.common_name) && band.common_name in rgb) {\n        rgb[band.common_name] = { index, band };\n      }\n    }\n    let complete = Object.values(rgb).every(o => o !== null);\n    return complete ? rgb : null;\n  }\n\n  /**\n   * Returns the band for the given criteria.\n   * \n   * Searches the given `property` (default: `name`) for the given value(s).\n   * \n   * @param {*} value A single value to find or a list of values to find one of.\n   * @param {string} property The property in the bands to match against.\n   * @param {Array.<Object>} bands For performance reasons you can provide a list of merged bands from `getBands()`.\n   * @returns {BandWithIndex|null}\n   * @see {getBands}\n   */\n  findBand(value, property = 'name', bands = null) {\n    if (!Array.isArray(value)) {\n      value = [value];\n    }\n    if (!isObject(bands)) {\n      bands = this.getBands();\n    }\n    let index = bands.findIndex(band => isObject(band) && value.includes(band[property]));\n    if (index >= 0) {\n      return { index, band: bands[index] };\n    }\n    return null;\n  }\n\n  /**\n   * Returns the band for the given band index.\n   * \n   * Passes through the (band) objects.\n   * \n   * @param {number|Object} band\n   * @returns {Object|null}\n   * @see {getBands}\n   */\n  getBand(band) {\n    if (isObject(band) || band === null) {\n      return band;\n    }\n    let bands = this.getBands();\n    return bands[band] || null;\n  }\n\n  /**\n   * Gets the reported minimum and maximum values for an asset (or band).\n   * \n   * Searches through different extension fields in raster, claasification, and file.\n   * \n   * @param {Object|number} band\n   * @returns {Statistics}\n   */\n  getMinMaxValues(band = null) {\n    band = this.getBand(band);\n\n    /**\n     * Statistics\n     * \n     * @typedef {Object} Statistics\n     * @property {number|null} minimum Minimum value\n     * @property {number|null} maximum Maximum value\n     */\n    const stats = {\n      minimum: null,\n      maximum: null\n    };\n\n    // Checks whether the stats object is completely filled\n    const isComplete = obj => obj.minimum !== null && obj.maximum !== null;\n\n    // data sources: raster (statistics, histogram, data_type), classification, file (values, data_type)\n    if (band) {\n      if (isObject(band.statistics)) {\n        if (typeof band.statistics.minimum === 'number') {\n          stats.minimum = band.statistics.minimum;\n        }\n        if (typeof band.statistics.maximum === 'number') {\n          stats.maximum = band.statistics.maximum;\n        }\n        if (isComplete(stats)) {\n          return stats;\n        }\n      }\n\n      if (isObject(band.histogram)) {\n        if (typeof band.histogram.min === 'number') {\n          stats.minimum = band.histogram.min;\n        }\n        if (typeof band.histogram.max === 'number') {\n          stats.maximum = band.histogram.max;\n        }\n        if (isComplete(stats)) {\n          return stats;\n        }\n      }\n    }\n\n    let classification = this.getMetadata(\"classification:classes\");\n    if (Array.isArray(classification)) {\n      classification.reduce((obj, cls) => {\n        obj.minimum = Math.min(obj.minimum, cls.value);\n        obj.maximum = Math.max(obj.maximum, cls.value);\n        return obj;\n      }, stats);\n      if (isComplete(stats)) {\n        return stats;\n      }\n    }\n\n    let values = this.getMetadata(\"file:values\");\n    if (Array.isArray(values)) {\n      values.reduce((obj, map) => {\n        obj.minimum = Math.min(obj.minimum, ...map.values);\n        obj.maximum = Math.max(obj.maximum, ...map.values);\n        return obj;\n      }, stats);\n      if (isComplete(stats)) {\n        return stats;\n      }\n    }\n\n    let data_type = (isObject(band) && band.data_type) || this.getMetadata(\"file:data_type\");\n    if (data_type) {\n      stats.minimum = getMinForDataType(data_type);\n      stats.maximum = getMaxForDataType(data_type);\n    }\n\n    return stats;\n  }\n\n  /**\n   * Gets the reported no-data values for an asset (or band).\n   * \n   * Searches through different extension fields in raster, claasification, and file.\n   * \n   * @param {Object|number} band \n   * @returns {Array.<*>}\n   */\n  getNoDataValues(band = null) {\n    band = this.getBand(band);\n    // data sources: raster (nodata), classification (nodata flag), file (nodata)\n    let nodata = [];\n    if (band && typeof band.nodata !== 'undefined') {\n      nodata.push(band.nodata);\n    }\n    else {\n      let file = this.getMetadata(\"file:nodata\");\n      if (typeof file !== 'undefined') {\n        nodata = file;\n      }\n      else {\n        let classification = this.getMetadata(\"classification:classes\");\n        if (Array.isArray(classification)) {\n          nodata = classification\n            .filter(cls => Boolean(cls.nodata))\n            .map(cls => cls.value);\n        }\n      }\n    }\n\n    return nodata.map(value => {\n      if (value === \"nan\") {\n        return NaN;\n      }\n      else if (value === \"+inf\") {\n        return +Infinity;\n      }\n      else if (value === \"-inf\") {\n        return -Infinity;\n      }\n      else {\n        return value;\n      }\n    });\n  }\n\n  /**\n   * Returns whether this asset is an Item Asset definition (i.e. doesn't have an href) or not.\n   * \n   * @returns {boolean} `true` is this asset is an Item Asset definition, `false` otherwise.\n   */\n  isDefintion() { // \n    return !hasText(this.href);\n  }\n\n  /**\n   * Checks whether the asset is accessible via HTTP or HTTPS.\n   * \n   * Returns `null` for item asset definitions, otherwise a `boolean` value.\n   * \n   * @returns {boolean|null} `true` is this asset is available via HTTP or HTTPS, `false` or `null` otherwise.\n   */\n  isHTTP() {\n    if (this.isDefintion()) {\n      return null;\n    }\n    return super.isHTTP();\n  }\n\n  /**\n   * Checks whether this asset as a specific role assigned.\n   * \n   * @param {string|Array.<string>} roles One or more roles.\n   * @param {boolean} includeKey Also returns `true` if the asset key equals to one of the given roles.\n   * @returns {boolean} `true` is this asset is one of the given roles (or key), `false` otherwise.\n   */\n  hasRole(roles, includeKey = false) { // string or array of strings\n    if (!Array.isArray(roles)) {\n      roles = [roles];\n    }\n    if (includeKey && roles.includes(this.getKey())) {\n      return true;\n    }\n    return Array.isArray(this.roles) && (Boolean(this.roles.find(role => roles.includes(role))));\n  }\n\n  /**\n   * Converts an object of STAC Assets into an object of stac-js Assets.\n   * \n   * @param {Object.<string, Object>} assets Assets\n   * @param {Collection|Item|null} context The object that contains the assets\n   * @returns {Object.<string, Asset>} Improved Assets\n   */\n  static fromAssets(assets, context = null) {\n    let newAssets = {};\n    if(isObject(assets)) {\n      for(let key in assets) {\n        newAssets[key] = new Asset(assets[key], key, context);\n      }\n    }\n    return newAssets;\n  }\n\n}\n\nexport default Asset;\n","import { geotiffMediaTypes, isMediaType } from './mediatypes.js';\nimport { isObject } from './utils.js';\nimport STACHypermedia from './hypermedia.js';\n\n/**\n * Class for STAC spec entities (Item, Catalog and Collection).\n * \n * Don't instantiate this class!\n * \n * @interface\n * @param {Object} data The STAC object\n * @param {string|null} absoluteUrl Absolute URL of the STAC object\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass STAC extends STACHypermedia {\n\n  constructor(data, absoluteUrl = null, keyMap = {}, privateKeys = []) {\n    super(data, absoluteUrl, keyMap, privateKeys);\n  }\n\n  /**\n   * Returns a single temporal extent for the STAC entity.\n   * \n   * @returns {Array.<Date|null>|null}\n   */\n  getTemporalExtent() {\n    return null;\n  }\n\n  /**\n   * Returns the temporal extent(s) for the STAC entity.\n   * \n   * @returns {Array.<Array.<Date|null>>}\n   */\n  getTemporalExtents() {\n    return [];\n  }\n\n  /**\n   * Get the icons from the links in a STAC entity.\n   * \n   * @param {boolean} allowUndefined \n   * @returns {Array.<Link>}\n   */\n  getIcons(allowUndefined = true) {\n    return this.getLinksWithRels(['icon'])\n      .filter(img => img.canBrowserDisplayImage(allowUndefined));\n  }\n\n  /**\n   * Get the thumbnails from the assets and links in a STAC entity.\n   * \n   * @param {boolean} browserOnly - Return only images that can be shown in a browser natively (PNG/JPG/GIF/WEBP + HTTP/S).\n   * @param {string|null} prefer - If not `null` (default), prefers a role over the other. Either `thumbnail` or `overview`.\n   * @returns {Array.<STACReference>} Asset or Link\n   */\n  getThumbnails(browserOnly = true, prefer = null) {\n    let thumbnails = this.getAssetsWithRoles(['thumbnail', 'overview'], true);\n    if (prefer && thumbnails.length > 1) {\n      thumbnails.sort(a => (Array.isArray(a.roles) && a.roles.includes(prefer)) || (a.getKey() === prefer) ? -1 : 1);\n    }\n    // Get from links only if no assets are available as they should usually be the same as in assets\n    if (thumbnails.length === 0) {\n      thumbnails = this.getLinksWithRels(['preview']);\n    }\n    if (browserOnly) {\n      // Remove all images that can't be displayed in a browser\n      thumbnails = thumbnails.filter(img => img.canBrowserDisplayImage());\n    }\n    return thumbnails;\n  }\n\n  /**\n   * Determines the default GeoTiff asset for visualization.\n   * \n   * @param {boolean} httpOnly Return only GeoTiffs that can be accessed via HTTP(S)\n   * @param {boolean} cogOnly Return only COGs\n   * @returns {Asset} Default GeoTiff asset\n   * @see {rankGeoTIFFs}\n   */\n  getDefaultGeoTIFF(httpOnly = true, cogOnly = false) {\n    let scores = this.rankGeoTIFFs(httpOnly, cogOnly);\n    return scores[0]?.asset;\n  }\n\n  /**\n   * Object with an asset and the corresponding score.\n   * \n   * @typedef {Object} AssetScore\n   * @property {Asset} asset\n   * @property {number} score\n   */\n\n  /**\n   * A function that can influence the score.\n   * \n   * Returns a relative addition to the score.\n   * Negative values subtract from the score.\n   * \n   * @callback STAC~rankGeoTIFFs\n   * @param {Asset} asset The asset to calculate the score for.\n   */\n\n  /**\n   * Ranks the GeoTiff assets for visualization purposes.\n   * \n   * The score factors can be found below:\n   * - Roles/Keys (by default) - if multiple roles apply only the highest score is added:\n   *   - overview => +3\n   *   - thumbnail => +2\n   *   - visual => +2\n   *   - data => +1\n   *   - none of the above => no change\n   * - Other factors:\n   *   - media type is COG: +2 (if cogOnly = false)\n   *   - has RGB bands: +1\n   *   - additionalCriteria: +/- a custom value\n   * \n   * @param {boolean} httpOnly Return only GeoTiffs that can be accessed via HTTP(S)\n   * @param {boolean} cogOnly Return only COGs\n   * @param {Object.<string, number>} roleScores Roles (and keys) considered for the scoring. They key is the role name, the value is the score. Higher is better. Defaults to the roles and scores detailed above. An empty object disables role-based scoring.\n   * @param {STAC~rankGeoTIFFs} additionalCriteria A function to customize the score by adding/subtracting.\n   * @returns {Array.<AssetScore>} GeoTiff assets sorted by score in descending order.\n   */\n  rankGeoTIFFs(httpOnly = true, cogOnly = false, roleScores = null, additionalCriteria = null) {\n    if (!isObject(roleScores)) {\n      roleScores = {\n        data: 1, \n        visual: 2,\n        thumbnail: 2,\n        overview: 3\n      };\n    }\n    let scores = [];\n    let assets = this.getAssetsByTypes(geotiffMediaTypes);\n    if (httpOnly) {\n      assets = assets.filter(asset => asset.isHTTP() && (!cogOnly || asset.isCOG()));\n    }\n    let roles = Object.entries(roleScores);\n    for(let asset of assets) {\n      let score = 0;\n      if (roles.length > 0) {\n        let result = roles\n          .filter(([role]) => asset.hasRole(role, true)) // Remove all roles that don't exist in the asset\n          .map(([,value]) => value); // Map to the scores\n        if (result.length > 0) {\n          score += Math.max(...result); // Add the highest of the scores\n        }\n      }\n      if (!cogOnly && asset.isCOG()) {\n        score += 2;\n      }\n      if (asset.findVisualBands()) {\n        score += 1;\n      }\n      if (typeof additionalCriteria === 'function') {\n        score += additionalCriteria(asset);\n      }\n\n      scores.push({asset, score});\n    }\n    scores.sort((a,b) => b.score - a.score);\n    return scores;\n  }\n\n  /**\n   * The single-band assets for RGB composites.\n   * \n  * @typedef {Object} VisualAssets\n  * @property {BandWithIndex} red The red band with its index\n  * @property {BandWithIndex} green The green band with its index\n  * @property {BandWithIndex} blue The blue band with its index\n  */\n\n  /**\n   * Find the single-band assets for RGB.\n   * \n   * @returns {VisualAssets|null} Object with the RGB bands or null\n   */\n  findVisualAssets() {\n    let rgb = {\n      red: null,\n      green: null,\n      blue: null\n    };\n    let names = Object.keys(rgb);\n    let assets = this.getAssets();\n    for(let asset of assets) {\n      let bands = asset.getBands();\n      if (bands.length !== 1) {\n        continue;\n      }\n      let result = asset.findBand(names, 'common_name', bands);\n      if (result) {\n        rgb[result.band.common_name] = asset;\n      }\n    }\n    let complete = Object.values(rgb).every(o => o !== null);\n    return complete ? rgb : null;\n  }\n\n  /**\n   * \n   * @todo\n   * @param {string} key\n   * @returns {Asset|null}\n   */\n  getAsset(key) {\n    if (!isObject(this.assets)) {\n      return null;\n    }\n    return this.assets[key] || null;\n  }\n\n  /**\n   * \n   * @todo\n   * @returns {Array.<Asset>}\n   */\n  getAssets() {\n    if (!isObject(this.assets)) {\n      return [];\n    }\n    return Object.values(this.assets);\n  }\n\n  /**\n   * Returns all assets that contain at least one of the given roles.\n   * \n   * @param {string|Array.<string>} roles One or more roles.\n   * @param {boolean} includeKey Also returns `true` if the asset key equals to one of the given roles.\n   * @returns {Array.<Asset>} The assets with the given roles.\n   */\n  getAssetsWithRoles(roles, includeKey = false) {\n    return this.getAssets().filter(asset => asset.hasRole(roles, includeKey));\n  }\n\n  /**\n   * \n   * @todo\n   * @param {string} role \n   * @param {boolean} includeKey \n   * @returns {Asset|null}\n   */\n  getAssetWithRole(role, includeKey = false) {\n    let assets = this.getAssetsWithRoles([role], includeKey);\n    return assets[0] || null;\n  }\n\n  /**\n   * \n   * @todo\n   * @param {Array.<string>} types \n   * @returns {Array.<Asset>}\n   */\n  getAssetsByTypes(types) {\n    return this.getAssets().filter(asset => isMediaType(asset.type, types));\n  }\n\n  /**\n   * \n   * @todo\n   * @param {*} other \n   * @returns {boolean}\n   */\n  equals(other) {\n    if (this === other) {\n      return true;\n    }\n    if (!(other instanceof STAC)) {\n      return false;\n    }\n    if (this.getObjectType() !== other.getObjectType()) {\n      return false;\n    }\n    if (this.id && this.id === other.id) {\n      return true;\n    }\n    return false;\n  }\n\n}\n\nexport default STAC;\n","import STAC from './stac.js';\n\n/**\n * Class for common parts of Catalogs and Collections.\n * \n * Don't instantiate this class!\n * \n * @interface\n * @param {Object} data The STAC Catalog or Collection object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Catalog or Collection\n * @param {Object.<string, function>} keyMap Keys and functions that convert the values to stac-js objects.\n * @param {Array.<string>} privateKeys Keys that are private members of the stac-js objects (for cloning and export).\n */\nclass CatalogLike extends STAC {\n\n  constructor(data, absoluteUrl = null, keyMap = {}, privateKeys = []) {\n    super(data, absoluteUrl, keyMap, privateKeys);\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'Catalog' or 'Collection'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return this.type;\n  }\n\n  /**\n   * Returns the search link, if present.\n   * \n   * If a specific method is provied, can exclude other methods from being returned.\n   * \n   * @returns {Link|null} The search link\n   */\n  getSearchLink(method = null) {\n    let links = this.getStacLinksWithRel('search');\n    if (!method) {\n      return links.find(link => link.method === method || (!method && !link.method)) || null;\n    }\n    else {\n      return links[0] || null;\n    }\n  }\n\n  /**\n   * Returns the link for API collections, if present.\n   * \n   * @returns {Link|null} The API collections link\n   */\n  getApiCollectionsLink() {\n    return this.getStacLinkWithRel('data');\n  }\n\n  /**\n   * Returns the link for API items, if present.\n   * \n   * @returns {Link|null} The API items link\n   */\n  getApiItemsLink() {\n    return this.getStacLinkWithRel('items');\n  }\n\n  /**\n   * Returns all child links.\n   * \n   * @returns {Array.<Link>} The child links\n   */\n  getChildLinks() {\n    return this.getStacLinksWithRel('child');\n  }\n\n  /**\n   * Returns all item links.\n   * \n   * @returns {Array.<Link>} The child links\n   */\n  getItemLinks() {\n    return this.getStacLinksWithRel('item');\n  }\n\n}\n\nexport default CatalogLike;\n","import CatalogLike from './cataloglike.js';\n\n/**\n * A STAC Catalog.\n * \n * You can access all properties of the given STAC Catalog object directly, e.g. `catalog.title`.\n * \n * @class\n * @property {string} stac_version\n * @property {?Array.<string>} stac_extensions\n * @property {string} type\n * @property {string} id\n * @property {?string} title\n * @property {string} description\n * @property {Array.<Link>} links\n * \n * @param {Object} data The STAC Catalog object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Catalog\n */\nclass Catalog extends CatalogLike {\n\n  constructor(data, absoluteUrl = null) {\n    super(data, absoluteUrl);\n  }\n\n}\n\nexport default Catalog;\n","import { hasText } from \"./utils.js\";\n\n/**\n * Parses a UTC-based ISO8601 date and time string to a Date object.\n * \n * Does not support timezones as all STAC datetime must be given in UTC.\n * \n * @returns {Date|null}\n */\nexport function isoToDate(str) {\n  if (hasText(str) && str.length >= 10) {\n    try {\n      let strParts = str.match(/^(-?\\d{1,})-(\\d\\d)-(\\d\\d)[T ](\\d\\d):(\\d\\d):(\\d\\d)(?:\\.(\\d*))?(?:Z|[+-]00:00)?$/i);\n      let dt = strParts.slice(1).map(n => parseInt(n, 10));\n      return new Date(Date.UTC(dt[0], dt[1] - 1, dt[2], dt[3], dt[4], dt[5], dt[6] || 0));\n    } catch(error) {\n      return null;\n    }\n  }\n  return null;\n}\n\n/**\n * Computes the center datetime between two datetimes.\n * \n * @param {Date} start start datetime\n * @param {Date} end end datetime\n * @returns {Date} center datetime\n */\nexport function centerDateTime(start, end) {\n  return new Date(start.valueOf() + ((end - start) / 2));\n}\n\n/**\n * Computes a single interval from multiple temporal intervals.\n * \n * @param {Array.<Array.<Date>>} list A list of temporal intervals\n * @returns {Array.<Date>|null} The merged temporal interval\n */\nexport function unionDateTime(list) {\n  if (!Array.isArray(list) || list.length === 0) {\n    return null;\n  }\n\n  let min;\n  let max;\n  const assign = (base, value, fn) => {\n    if (typeof base === 'undefined') {\n      return value;\n    }\n    else if (base === null || value === null) {\n      return null;\n    }\n    else {\n      return fn(base, value);\n    }\n  };\n  list.forEach(([start, end]) => {\n    min = assign(min, start, Math.min);\n    max = assign(max, end, Math.max);\n  });\n  return [\n    min === null ? null : new Date(min),\n    max === null ? null : new Date(max)\n  ];\n}\n","function toObject(bbox) {\n  let hasZ = bbox.length > 4;\n  let west = bbox[0];\n  let east = bbox[hasZ ? 3 : 2];\n  let south = bbox[1];\n  let north = bbox[hasZ ? 4 : 3];\n  return { west, east, south, north };\n}\n\nfunction bboxToCoords(bbox) {\n  let { west, east, south, north } = toObject(bbox);\n  return [\n    [\n      [west, north],\n      [west, south],\n      [east, south],\n      [east, north],\n      [west, north]\n    ]\n  ];\n}\n\n/**\n * Converts one or more bounding boxes to a GeoJSON Feature.\n * \n * The Feature contains a Polygon or MultiPolygon based on the given number of valid bounding boxes.\n * \n * @param {BoundingBox|Array.<BoundingBox>} bboxes \n * @returns {Object|null}\n */\nexport function toGeoJSON(bboxes) {\n  if (isBoundingBox(bboxes)) {\n    // Wrap a single bounding into an array\n    bboxes = [bboxes];\n  }\n  else if (Array.isArray(bboxes)) {\n    // Remove invalid bounding boxes\n    bboxes = bboxes.filter(bbox => isBoundingBox(bbox));\n  }\n  // Return if no valid bbox is given\n  if (!Array.isArray(bboxes) || bboxes.length === 0) {\n    return null;\n  }\n\n  let coordinates = bboxes.reduce((list, bbox) => {\n    if (isAntimeridianBoundingBox(bbox)) {\n      let { west, east, south, north } = toObject(bbox);\n      list.push(bboxToCoords([-180, south, east, north]));\n      list.push(bboxToCoords([west, south, 180, north]));\n    }\n    else {\n      list.push(bboxToCoords(bbox));\n    }\n    return list;\n  }, []);\n\n  let geometry = null;\n  if (coordinates.length === 1) {\n    geometry = {\n      type: \"Polygon\",\n      coordinates: coordinates[0]\n    };\n  }\n  else if (coordinates.length > 1) {\n    geometry = {\n      type: \"MultiPolygon\",\n      coordinates\n    };\n  }\n  if (geometry) {\n    return {\n      type: \"Feature\",\n      geometry,\n      properties: {}\n    };\n  }\n}\n\n/**\n * Checks whether the given thing is a valid bounding box.\n * \n * A valid bounding box is an array with 4 or 6 numbers that are valid WGS84 coordinates and span a rectangle.\n * See the STAC specification for details.\n * \n * @param {BoundingBox|Array.<number>} bbox A potential bounding box.\n * @returns {boolean} `true` if valid, `false` otherwise\n */\nexport function isBoundingBox(bbox) {\n  if (!Array.isArray(bbox) || ![4,6].includes(bbox.length) || bbox.some(n => typeof n !== \"number\")) {\n    return false;\n  }\n  let { west, east, south, north } = toObject(bbox);\n  return (\n    south <= north &&\n    west >= -180 && west <= 180 &&\n    south >= -90 &&\n    east <= 180 && east >= -180 &&\n    north <= 90\n  );\n}\n\nexport function isAntimeridianBoundingBox(bbox) {\n  if (!isBoundingBox(bbox)) {\n    return false;\n  }\n  \n  let { west, east } = toObject(bbox);\n  return west > east;\n}\n\n/**\n * Compute the union of a list of bounding boxes.\n * \n * The function ignores any invalid bounding boxes or values for the third dimension.\n * \n * @param {Array.<BoundingBox|null>} bboxes \n * @returns {BoundingBox|null}\n * @see {isBoundingBox}\n */\nexport function unionBoundingBox(bboxes) {\n  if (!Array.isArray(bboxes) || bboxes.length === 0) {\n    return null;\n  }\n\n  let extrema = {\n    west: 180,\n    south: 90,\n    east: -180,\n    north: -90,\n  };\n  bboxes.forEach(bbox => {\n    if (!isBoundingBox(bbox)) {\n      return;\n    }\n    let obj = toObject(bbox);\n    let min = ['west', 'south'];\n    for(let key in obj) {\n      let fn = min.includes(key) ? Math.min : Math.max;\n      extrema[key] = fn(extrema[key], obj[key]);\n    }\n  });\n\n  let bbox = [extrema.west, extrema.south, extrema.east, extrema.north];\n  return isBoundingBox(bbox) ? bbox : null;\n}\n","import Asset from './asset.js';\nimport CatalogLike from './cataloglike.js';\nimport { isoToDate } from './datetime.js';\nimport { isBoundingBox, toGeoJSON } from './geo.js';\nimport { hasText, mergeArraysOfObjects } from './utils.js';\n\n/**\n * Extents\n * \n * @typedef {Object} Extent\n * @property {SpatialExtent} spatial Spatial extents\n * @property {TemporalExtent} temporal Temporal extents\n */\n/**\n * Spatial Extents\n * \n * @typedef {Object} SpatialExtent\n * @property {Array.<Array<number>>} bbox Bounding boxes\n */\n/**\n * Temporal Extents\n * \n * @typedef {Object} TemporalExtent\n * @property {Array.<Array<string|null>>} interval Intervals\n */\n\n/**\n * A STAC Collection.\n * \n * You can access all properties of the given STAC Collection object directly, e.g. `collection.title`.\n * \n * @class\n * @property {string} stac_version\n * @property {?Array.<string>} stac_extensions\n * @property {string} type\n * @property {string} id\n * @property {?string} title\n * @property {string} description\n * @property {?Array.<string>} keywords\n * @property {string} license\n * @property {Array.<Provider>} providers\n * @property {Extent} extent\n * @property {Object.<string, Array|Object>} summaries\n * @property {Array.<Link>} links\n * @property {Object.<string, Asset>} assets\n * \n * @param {Object} data The STAC Collection object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Collection\n */\nclass Collection extends CatalogLike {\n\n  constructor(data, absoluteUrl = null) {\n    const keyMap = {\n      assets: Asset.fromAssets,\n      item_assets: Asset.fromAssets\n    };\n    super(data, absoluteUrl, keyMap);\n  }\n\n  /**\n   * Returns a GeoJSON Feature for this STAC Collection.\n   * \n   * The Feature contains a Polygon or MultiPolygon based on the given number of valid bounding boxes.\n   * \n   * @returns {Object|null} GeoJSON object or `null`\n   */\n  toGeoJSON() {\n    let geojson = toGeoJSON(this.getBoundingBoxes());\n    if (geojson) {\n      geojson.id = this.id;\n    }\n    return geojson;\n  }\n\n  /**\n   * Returns a single union bounding box for the whole collection.\n   * \n   * @returns {BoundingBox|null}\n   */\n  getBoundingBox() {\n    let bboxes = this.getRawBoundingBoxes();\n    if (bboxes.length > 0 && isBoundingBox(bboxes[0])) {\n      return bboxes[0];\n    }\n    return null;\n  }\n\n  /**\n   * Returns the individual bounding boxes for the collection,\n   * without the union bounding box if multiple bounding boxes are given.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getBoundingBoxes() {\n    let bboxes = this.getRawBoundingBoxes();\n    if (bboxes.length === 1 && isBoundingBox(bboxes[0])) {\n      return bboxes;\n    }\n    else if (bboxes.length > 1) {\n      return bboxes.filter((bbox, i) => i > 0 && isBoundingBox(bbox));\n    }\n    return [];\n  }\n\n  /**\n   * Returns all bounding boxes from the collection, including the union bounding box.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getRawBoundingBoxes() {\n    let extents = this.extent?.spatial?.bbox;\n    if (Array.isArray(extents) && extents.length > 0) {\n      return extents;\n    }\n    return [];\n  }\n\n  /**\n   * Returns a single temporal extent for the STAC Collection.\n   * \n   * @returns {Array.<Date|null>|null}\n   */\n  getTemporalExtent() {\n    return this.getTemporalExtents()[0] || null;\n  }\n\n  /**\n   * Returns the temporal extent(s) for the STAC Collection.\n   * \n   * @returns {Array.<Array.<Date|null>>}\n   */\n  getTemporalExtents() {\n    let extents = this.extent?.temporal?.interval;\n    if (Array.isArray(extents) && extents.length > 0) {\n      return extents\n        .filter(extent => Array.isArray(extent) && (hasText(extent[0]) || hasText(extent[1])))\n        .map(interval => interval.map(datetime => isoToDate(datetime)));\n    }\n    return [];\n  }\n\n  /**\n   * Returns metadata from the Collection summaries for the given field name.\n   * \n   * @param {string} field Field name\n   * @returns {Array.<*>|Object} The value of the field\n   */\n  getSummary(field) {\n    return this.summaries[field];\n  }\n\n  /**\n   * Returns the bands.\n   * \n   * This is usually a merge of eo:bands and raster:bands from the summaries.\n   * \n   * @returns {Array.<Object>}\n   */\n  getBands() {\n    let eo = this.getSummary('eo:bands');\n    let raster = this.getSummary('raster:bands');\n    let all = [eo, raster].filter(arr => Array.isArray(arr));\n    if (all.length >= 2) {\n      return mergeArraysOfObjects(...all);\n    }\n    else if (all.length === 1) {\n      return all[0];\n    }\n    else {\n      return [];\n    }\n  }\n  \n}\n\nexport default Collection;\n","import Collection from './collection.js';\nimport { unionDateTime } from './datetime.js';\nimport { unionBoundingBox } from './geo.js';\nimport APICollection from './apicollection.js';\n\n/**\n * Represents an Collections containing Collections.\n * \n * @class\n * @property {Array.<Collection>} collections\n * @property {Array.<Link>} links\n * \n * @param {Object} data The STAC API Collections object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Item Collection\n */\nclass CollectionCollection extends APICollection {\n\n  constructor(data, absoluteUrl = null) {\n    const keyMap = {\n      collections: collections => collections.map(collection => new Collection(collection))\n    };\n    super(data, absoluteUrl, keyMap);\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'CollectionCollection'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return \"CollectionCollection\";\n  }\n\n  /**\n   * Returns all collections.\n   * \n   * @returns {Array.<Collection>} All STAC Collections\n   */\n  getAll() {\n    return this.collections;\n  }\n\n  /**\n   * Check whether this given object is a STAC Collection of Collections (i.e. API Collections).\n   * \n   * @returns {boolean} `true` if the object is a STAC CollectionCollection, `false` otherwise.\n   */\n  isCollectionCollection() {\n    return true;\n  }\n\n  /**\n   * Returns a GeoJSON Feature Collection for this STAC object.\n   * \n   * @returns {Object|null} GeoJSON object or `null`\n   */\n  toGeoJSON() {\n    let features = this.collections\n      .map(collection => collection.toGeoJSON())\n      .filter(geojson => geojson !== null);\n    return {\n      type: \"FeatureCollection\",\n      features\n    };\n  }\n\n  /**\n   * Returns a single bounding box for all the STAC collections.\n   * \n   * @returns {BoundingBox|null}\n   */\n  getBoundingBox() {\n    return unionBoundingBox(this.getBoundingBoxes());\n  }\n\n  /**\n   * Returns a list of bounding boxes for all the STAC collections.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getBoundingBoxes() {\n    return this.collections.map(collection => collection.getBoundingBox());\n  }\n\n  /**\n   * Returns a single temporal extent for the all the STAC collections.\n   * \n   * @returns {Array.<Date|null>|null}\n   */\n  getTemporalExtent() {\n    return unionDateTime(this.getTemporalExtents());\n  }\n\n  /**\n   * Returns the temporal extent(s) for the all the STAC collections.\n   * \n   * @returns {Array.<Array.<Date|null>>}\n   */\n  getTemporalExtents() {\n    return this.collections.map(collection => collection.getTemporalExtent());\n  }\n\n}\n\nexport default CollectionCollection;\n","import Asset from './asset.js';\nimport { centerDateTime, isoToDate } from './datetime.js';\nimport { isBoundingBox } from './geo.js';\nimport { hasText } from './utils.js';\nimport STAC from './stac.js';\n\n/**\n * Metadata for an item, the item properties.\n * \n * @typedef {Object} ItemProperties\n * @property {string} datetime Date and Time\n */\n\n/**\n * A STAC Item.\n * \n * You can access all properties of the given STAC Item object directly, e.g. `item.id` or `item.properties.datetime`.\n * \n * @class\n * @property {string} stac_version\n * @property {?Array.<string>} stac_extensions\n * @property {string} type\n * @property {string} id\n * @property {Object|null} geometry\n * @property {?Array.<number>} bbox\n * @property {ItemProperties} properties\n * @property {Array.<Link>} links\n * @property {Object.<string, Asset>} assets\n * @property {?string} collection\n * \n * @param {Object} data The STAC Item object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Item\n */\nclass Item extends STAC {\n  \n  constructor(data, absoluteUrl = null) {\n    super(data, absoluteUrl, { assets: Asset.fromAssets });\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'Item'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return \"Item\";\n  }\n\n  /**\n   * Returns a GeoJSON Feature for this STAC object.\n   * \n   * @returns {Object|null} GeoJSON object or `null`\n   */\n  toGeoJSON() {\n    return this.toJSON();\n  }\n\n  /**\n   * Returns a single bounding box for the item.\n   * \n   * @returns {BoundingBox|null}\n   */\n  getBoundingBox() {\n    return isBoundingBox(this.bbox) ? this.bbox : null;\n  }\n\n  /**\n   * Returns bounding boxes for the item.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getBoundingBoxes() {\n    return isBoundingBox(this.bbox) ? [this.bbox] : [];\n  }\n\n  /**\n   * Returns a datetime for the STAC Item.\n   * \n   * If no datetime but start or end datetime are specified, computes a datetime from them.\n   * \n   * @returns {Date|null}\n   */\n  getDateTime() {\n    let dt = isoToDate(this.properties.datetime);\n    if (!dt) {\n      let start = isoToDate(this.properties.start_datetime);\n      let end = isoToDate(this.properties.end_datetime);\n      if (start && end) {\n        return centerDateTime(start, end);\n      }\n      else {\n        return start || end;\n      }\n    }\n    return dt;\n  }\n\n  /**\n   * Returns a single temporal extent for the STAC Item.\n   * \n   * @returns {Array.<Date|null>|null}\n   */\n  getTemporalExtent() {\n    return this.getTemporalExtents()[0] || null;\n  }\n\n  /**\n   * Returns the temporal extent(s) for the STAC Item.\n   * \n   * @returns {Array.<Array.<Date|null>>}\n   */\n  getTemporalExtents() {\n    let dates = [];\n    if (hasText(this.properties.start_datetime) || hasText(this.properties.end_datetime)) {\n      dates = [[this.properties.start_datetime || null, this.properties.end_datetime || null]];\n    }\n    else if (hasText(this.properties.datetime)) {\n      dates = [[this.properties.datetime, this.properties.datetime]];\n    }\n    return dates.map(interval => interval.map(datetime => isoToDate(datetime)));\n  }\n\n  /**\n   * Returns metadata from the Item properties for the given field name.\n   * \n   * @param {string} field Field name\n   * @returns {*} The value of the field\n   */\n  getMetadata(field) {\n    return this.properties[field];\n  }\n\n  /**\n   * Returns the bands.\n   * \n   * @todo Merge bands from assets\n   * @returns {Array.<Object>}\n   */\n  getBands() {\n    let eo = this.getMetadata('eo:bands');\n    if (Array.isArray(eo)) {\n      return eo;\n    }\n    else {\n      // todo: merge bands from assets?\n      return [];\n    }\n  }\n\n  /**\n   * Returns the collection link, if present.\n   * \n   * @returns {Link|null} The collection link\n   */\n  getCollectionLink() {\n    return this.getStacLinkWithRel('collection');\n  }\n\n}\n\nexport default Item;\n","import { unionDateTime } from './datetime.js';\nimport { unionBoundingBox } from './geo.js';\nimport Item from './item.js';\nimport APICollection from './apicollection.js';\n\n/**\n * Represents an ItemCollection containing Items.\n * \n * @class\n * @property {string} type\n * @property {Array.<Item>} features\n * @property {Array.<Link>} links\n * \n * @param {Object} data The STAC Item Collection object\n * @param {string|null} absoluteUrl Absolute URL of the STAC Item Collection\n */\nclass ItemCollection extends APICollection {\n\n  constructor(data, absoluteUrl = null) {\n    const keyMap = {\n      features: features => features.map(feature => new Item(feature))\n    };\n    super(data, absoluteUrl, keyMap);\n  }\n\n  /**\n   * Returns the type of the STAC object, here: 'ItemCollection'.\n   * \n   * @returns {string}\n   */\n  getObjectType() {\n    return \"ItemCollection\";\n  }\n\n  /**\n   * Returns all items.\n   * \n   * @returns {Array.<Item>} All STAC Items\n   */\n  getAll() {\n    return this.features;\n  }\n\n  /**\n   * Returns a GeoJSON FeatureCollection for this STAC object.\n   * \n   * @returns {Object|null} GeoJSON object or `null`\n   */\n  toGeoJSON() {\n    return this.toJSON();\n  }\n\n  /**\n   * Returns a single bounding box for all the STAC items.\n   * \n   * @returns {BoundingBox|null}\n   */\n  getBoundingBox() {\n    return unionBoundingBox(this.getBoundingBoxes());\n  }\n\n  /**\n   * Returns a list of bounding boxes for all the STAC items.\n   * \n   * @returns {Array.<BoundingBox>}\n   */\n  getBoundingBoxes() {\n    return this.features.map(item => item.getBoundingBox());\n  }\n\n  /**\n   * Returns a single temporal extent for all the STAC items.\n   * \n   * @returns {Array.<Date|null>|null}\n   */\n  getTemporalExtent() {\n    return unionDateTime(this.getTemporalExtents());\n  }\n\n  /**\n   * Returns the temporal extent(s) for all the STAC items.\n   * \n   * @returns {Array.<Array.<Date|null>>}\n   */\n  getTemporalExtents() {\n    return this.features.map(item => item.getTemporalExtent());\n  }\n\n}\n\nexport default ItemCollection;\n","import Migrate from '@radiantearth/stac-migrate';\nimport APICollection from './apicollection.js';\nimport Asset from './asset.js';\nimport Catalog from './catalog.js';\nimport CatalogLike from './cataloglike.js';\nimport Collection from './collection.js';\nimport CollectionCollection from './collectioncollection.js';\nimport Item from './item.js';\nimport ItemCollection from './itemcollection.js';\nimport STACHypermedia from './hypermedia.js';\nimport STACObject from './object.js';\nimport STACReference from './reference.js';\nimport STAC from './stac.js';\n\n/**\n * Creates the corresponding object for a object that conforms to the STAC specification.\n * \n * This creates either a Catalog, a Collection or an Item instance.\n * By default it migrates the data to the latest STAC version, but doesn't update the version number.\n * \n * @param {Object} data The STAC object\n * @param {boolean} migrate `true` to migrate to the latest version, `false` otherwise\n * @param {boolean} updateVersionNumber `true` to update the version number (to the latest version), `false` otherwise. Only applies if `migrate` is set to `true`.\n * @returns {Catalog|Collection|CollectionCollection|Item|ItemCollection} The created object instance.\n */\nexport default function create(data, migrate = true, updateVersionNumber = false) {\n  if (migrate) {\n    data = Migrate.stac(data, updateVersionNumber);\n  }\n  if (data.type === 'Feature') {\n    return new Item(data);\n  }\n  else if (data.type === 'FeatureCollection') {\n    return new ItemCollection(data);\n  }\n  else if (data.type === 'Collection'|| (!data.type && typeof data.extent !== 'undefined' && typeof data.license !== 'undefined')) {\n    return new Collection(data);\n  }\n  else if (!data.type && Array.isArray(data.collections)) {\n    return new CollectionCollection(data);\n  }\n  else {\n    return new Catalog(data);\n  }\n}\n\nexport {\n  APICollection,\n  Asset,\n  Catalog,\n  CatalogLike,\n  Collection,\n  CollectionCollection,\n  Item,\n  ItemCollection,\n  STAC,\n  STACHypermedia,\n  STACObject,\n  STACReference\n};\n"],"names":["compareVersions","LATEST_VERSION","SCHEMAS","EXTENSIONS","itemAndCollection","datacube","eo","file","label","pointcloud","processing","projection","raster","sar","sat","scientific","view","version","timestamps","catalog","collection","item","Object","assign","Ext","parseUrl","url","match","id","V","extensions","set","stac","stac_version","Array","isArray","stac_extensions","ext","e","before","compareTo","compare","_","type","val","is","isDefined","isObject","obj","rename","oldKey","newKey","forAll","key","fn","i","toArray","flattenArray","newKeys","summary","value","flattenOneElementArray","length","removeFromArray","valueToRemove","index","indexOf","splice","ensure","defaultValue","upgradeExtension","context","extension","findIndex","old","addExtension","newExtension","push","sort","removeExtension","oldExtension","migrateExtensionShortnames","oldShortnames","keys","newSchemas","values","mapValues","populateExtensions","objectsToCheck","assets","concat","item_assets","summaries","properties","forEach","prefix","oldValues","newValues","map","mapObject","moveTo","fromSummary","mergedSummary","condition","runAll","migrations","startsWith","toUTC","this","toISOString","error","date","Date","replace","Checksum","multihash","hexToUint8","hexString","Error","Uint8Array","byte","parseInt","uint8ToHex","bytes","reduce","str","toString","padStart","toMultihash","algo","encoded","encode","console","warn","Catalog","migrate","updateVersionNumber","Collection","spatial","bbox","temporal","interval","extent","min","max","start","end","unshift","count","Math","union","fill","middle","c","collectionAssets","Asset","migrateAll","itemAsset","other_properties","prop","minimum","maximum","filter","v","a","b","links","find","link","includes","rel","Fields","Item","geometry","commons","CollectionCollection","object","collections","ItemCollection","itemCollection","features","feature","field","asset","mediaTypes","bands","band","_commonMetadata","_timestamps","_versioningIndicator","checksum","classification","o","cube","dtr","pc","proj","sci","table","Migrate","collectionCollection","license","enableMultihash","module","exports","hasText","string","mergeArraysOfObjects","arr","merged","getMinForDataType","getMaxForDataType","STACObject","constructor","data","keyMap","privateKeys","toJSON","_keyMap","_privateKeys","isItem","isCatalog","isCatalogLike","isCollection","isItemCollection","isCollectionCollection","isAsset","isLink","getObjectType","getAbsoluteUrl","getMetadata","toGeoJSON","getBoundingBox","getBoundingBoxes","v2","browserProtocols","isGdalVfsUri","href","toAbsolute","baseUrl","stringify","normalizeUri","noParams","uri","URI","baseUri","baseUriPath","path","endsWith","absoluteTo","normalize","query","fragment","geojsonMediaType","stacMediaTypes","browserImageTypes","cogMediaTypes","geotiffMediaTypes","isMediaType","allowedTypes","allowUndefined","toLowerCase","isStacMediaType","STACReference","super","_context","getContext","canBrowserDisplayImage","protocol","suffix","isType","types","isGeoTIFF","isCOG","isHTTP","Link","fromLinks","STACHypermedia","absoluteUrl","_url","self","getSelfLink","setAbsoluteUrl","getStacLinksWithRel","getLinksWithRels","getStacLinkWithRel","getLinks","getLinkWithRel","rels","getLinksWithOtherRels","getRootLink","getParentLink","APICollection","getAll","_key","isDefintion","getKey","getBands","findVisualBands","rgb","red","green","blue","common_name","complete","every","findBand","property","getBand","getMinMaxValues","stats","isComplete","statistics","histogram","cls","data_type","getNoDataValues","nodata","Boolean","NaN","Infinity","hasRole","roles","includeKey","role","fromAssets","newAssets","STAC","getTemporalExtent","getTemporalExtents","getIcons","img","getThumbnails","browserOnly","prefer","thumbnails","getAssetsWithRoles","getDefaultGeoTIFF","httpOnly","cogOnly","scores","rankGeoTIFFs","roleScores","additionalCriteria","visual","thumbnail","overview","getAssetsByTypes","entries","score","result","findVisualAssets","names","getAssets","getAsset","getAssetWithRole","equals","other","CatalogLike","getSearchLink","method","getApiCollectionsLink","getApiItemsLink","getChildLinks","getItemLinks","isoToDate","strParts","dt","slice","n","UTC","centerDateTime","valueOf","unionDateTime","list","base","toObject","hasZ","west","east","south","north","bboxToCoords","bboxes","isBoundingBox","coordinates","isAntimeridianBoundingBox","some","unionBoundingBox","extrema","geojson","getRawBoundingBoxes","extents","datetime","getSummary","all","getDateTime","start_datetime","end_datetime","dates","getCollectionLink","create"],"sourceRoot":""}